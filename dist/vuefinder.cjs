"use strict";var Br=Object.defineProperty;var Cr=(n,t,o)=>t in n?Br(n,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[t]=o;var Hn=(n,t,o)=>Cr(n,typeof t!="symbol"?t+"":t,o);const e=require("vue"),$r=require("mitt"),Dr=require("dragselect"),Tr=require("@uppy/core"),Mr=require("@uppy/xhr-upload"),Ar=require("vanilla-lazyload");require("cropperjs/dist/cropper.css");const Or=require("cropperjs");var co;const Yt=(co=document.querySelector('meta[name="csrf-token"]'))==null?void 0:co.getAttribute("content");class Lr{constructor(t){Hn(this,"config");this.config=t}get config(){return this.config}transformRequestParams(t){const o=this.config,s={};Yt!=null&&Yt!==""&&(s[o.xsrfHeaderName]=Yt);const r=Object.assign({},o.headers,s,t.headers),i=Object.assign({},o.params,t.params),l=t.body,c=o.baseUrl+t.url,a=t.method;let d;a!=="get"&&(l instanceof FormData?(d=l,o.body!=null&&Object.entries(this.config.body).forEach(([u,v])=>{d.append(u,v)})):(d={...l},o.body!=null&&Object.assign(d,this.config.body)));const m={url:c,method:a,headers:r,params:i,body:d};if(o.transformRequest!=null){const u=o.transformRequest({url:c,method:a,headers:r,params:i,body:d});u.url!=null&&(m.url=u.url),u.method!=null&&(m.method=u.method),u.params!=null&&(m.params=u.params??{}),u.headers!=null&&(m.headers=u.headers??{}),u.body!=null&&(m.body=u.body)}return m}getDownloadUrl(t,o){if(o.url!=null)return o.url;const s=this.transformRequestParams({url:"",method:"get",params:{q:"download",adapter:t,path:o.path}});return s.url+"?"+new URLSearchParams(s.params).toString()}getPreviewUrl(t,o){if(o.url!=null)return o.url;const s=this.transformRequestParams({url:"",method:"get",params:{q:"preview",adapter:t,path:o.path}});return s.url+"?"+new URLSearchParams(s.params).toString()}async send(t){const o=this.transformRequestParams(t),s=t.responseType||"json",r={method:t.method,headers:o.headers,signal:t.abortSignal},i=o.url+"?"+new URLSearchParams(o.params);if(o.method!=="get"&&o.body!=null){let c;o.body instanceof FormData?c=t.body:(c=JSON.stringify(o.body),r.headers["Content-Type"]="application/json"),r.body=c}const l=await fetch(i,r);if(l.ok)return await l[s]();throw await l.json()}}function Fr(n){const t={baseUrl:"",headers:{},params:{},body:{},xsrfHeaderName:"X-CSRF-Token"};return typeof n=="string"?Object.assign(t,{baseUrl:n}):Object.assign(t,n),new Lr(t)}function Rr(n){let t=localStorage.getItem(n+"_storage");const o=e.reactive(JSON.parse(t??"{}"));e.watch(o,s);function s(){Object.keys(o).length?localStorage.setItem(n+"_storage",JSON.stringify(o)):localStorage.removeItem(n+"_storage")}function r(a,d){o[a]=d}function i(a){delete o[a]}function l(){Object.keys(o).map(a=>i(a))}return{getStore:(a,d=null)=>o.hasOwnProperty(a)?o[a]:d,setStore:r,removeStore:i,clearStore:l}}async function Hr(n,t){const o=t[n];return typeof o=="function"?(await o()).default:o}function Ir(n,t,o,s){const{getStore:r,setStore:i}=n,l=e.ref({}),c=e.ref(r("locale",t)),a=(u,v=t)=>{Hr(u,s).then(f=>{l.value=f,i("locale",u),c.value=u,i("translations",f),Object.values(s).length>1&&(o.emit("vf-toast-push",{label:"The language is set to "+u}),o.emit("vf-language-saved"))}).catch(f=>{v?(o.emit("vf-toast-push",{label:"The selected locale is not yet supported!",type:"error"}),a(v,null)):o.emit("vf-toast-push",{label:"Locale cannot be loaded!",type:"error"})})};e.watch(c,u=>{a(u)}),!r("locale")&&!s.length?a(t):l.value=r("translations");const d=(u,...v)=>v.length?d(u=u.replace("%s",v.shift()),...v):u;function m(u,...v){return l.value&&l.value.hasOwnProperty(u)?d(l.value[u],...v):d(u,...v)}return e.reactive({t:m,locale:c})}const Z={EDIT:"edit",NEW_FILE:"newfile",NEW_FOLDER:"newfolder",PREVIEW:"preview",ARCHIVE:"archive",UNARCHIVE:"unarchive",SEARCH:"search",RENAME:"rename",UPLOAD:"upload",DELETE:"delete",FULL_SCREEN:"fullscreen",DOWNLOAD:"download",LANGUAGE:"language"},zr=Object.values(Z),Ur="2.6.3";function uo(n,t,o,s,r){return(t=Math,o=t.log,s=1024,r=o(n)/o(s)|0,n/t.pow(s,r)).toFixed(0)+" "+(r?"KMGTPEZY"[--r]+"iB":"B")}function mo(n,t,o,s,r){return(t=Math,o=t.log,s=1e3,r=o(n)/o(s)|0,n/t.pow(s,r)).toFixed(0)+" "+(r?"KMGTPEZY"[--r]+"B":"B")}function jr(n){const t={k:1,m:2,g:3,t:4},s=/(\d+(?:\.\d+)?)\s?(k|m|g|t)?b?/i.exec(n);return s[1]*Math.pow(1024,t[s[2].toLowerCase()])}const Fe={SYSTEM:"system",LIGHT:"light",DARK:"dark"};function qr(n,t){const o=e.ref(Fe.SYSTEM),s=e.ref(Fe.LIGHT);o.value=n.getStore("theme",t??Fe.SYSTEM);const r=window.matchMedia("(prefers-color-scheme: dark)"),i=l=>{o.value===Fe.DARK||o.value===Fe.SYSTEM&&l.matches?s.value=Fe.DARK:s.value=Fe.LIGHT};return i(r),r.addEventListener("change",i),{value:o,actualValue:s,set(l){o.value=l,l!==Fe.SYSTEM?n.setStore("theme",l):n.removeStore("theme"),i(r)}}}function Pr(){const n=e.shallowRef(null),t=e.ref(!1),o=e.ref();return{visible:t,type:n,data:o,open:(i,l=null)=>{document.querySelector("body").style.overflow="hidden",t.value=!0,n.value=i,o.value=l},close:()=>{document.querySelector("body").style.overflow="",t.value=!1,n.value=null}}}/*!
 * OverlayScrollbars
 * Version: 2.10.0
 *
 * Copyright (c) Rene Haas | KingSora.
 * https://github.com/KingSora
 *
 * Released under the MIT license.
 */const pe=(n,t)=>{const{o,i:s,u:r}=n;let i=o,l;const c=(m,u)=>{const v=i,f=m,_=u||(s?!s(v,f):v!==f);return(_||r)&&(i=f,l=v),[i,_,l]};return[t?m=>c(t(i,l),m):c,m=>[i,!!m,l]]},Gr=typeof window<"u"&&typeof HTMLElement<"u"&&!!window.document,ve=Gr?window:{},fo=Math.max,Wr=Math.min,tn=Math.round,Nt=Math.abs,In=Math.sign,vo=ve.cancelAnimationFrame,kn=ve.requestAnimationFrame,xt=ve.setTimeout,nn=ve.clearTimeout,Ot=n=>typeof ve[n]<"u"?ve[n]:void 0,Kr=Ot("MutationObserver"),zn=Ot("IntersectionObserver"),Bt=Ot("ResizeObserver"),yt=Ot("ScrollTimeline"),wn=n=>n===void 0,Lt=n=>n===null,Se=n=>typeof n=="number",ct=n=>typeof n=="string",bn=n=>typeof n=="boolean",we=n=>typeof n=="function",Ne=n=>Array.isArray(n),Ct=n=>typeof n=="object"&&!Ne(n)&&!Lt(n),yn=n=>{const t=!!n&&n.length,o=Se(t)&&t>-1&&t%1==0;return Ne(n)||!we(n)&&o?t>0&&Ct(n)?t-1 in n:!0:!1},$t=n=>!!n&&n.constructor===Object,Dt=n=>n instanceof HTMLElement,Ft=n=>n instanceof Element;function Y(n,t){if(yn(n))for(let o=0;o<n.length&&t(n[o],o,n)!==!1;o++);else n&&Y(Object.keys(n),o=>t(n[o],o,n));return n}const po=(n,t)=>n.indexOf(t)>=0,lt=(n,t)=>n.concat(t),ne=(n,t,o)=>(!ct(t)&&yn(t)?Array.prototype.push.apply(n,t):n.push(t),n),Ie=n=>Array.from(n||[]),En=n=>Ne(n)?n:!ct(n)&&yn(n)?Ie(n):[n],on=n=>!!n&&!n.length,rn=n=>Ie(new Set(n)),ge=(n,t,o)=>{Y(n,r=>r?r.apply(void 0,t||[]):!0),!o&&(n.length=0)},_o="paddingTop",ho="paddingRight",go="paddingLeft",ko="paddingBottom",wo="marginLeft",bo="marginRight",yo="marginBottom",Eo="overflowX",Vo="overflowY",Rt="width",Ht="height",Re="visible",je="hidden",Ze="scroll",Yr=n=>{const t=String(n||"");return t?t[0].toUpperCase()+t.slice(1):""},It=(n,t,o,s)=>{if(n&&t){let r=!0;return Y(o,i=>{const l=n[i],c=t[i];l!==c&&(r=!1)}),r}return!1},So=(n,t)=>It(n,t,["w","h"]),Et=(n,t)=>It(n,t,["x","y"]),Jr=(n,t)=>It(n,t,["t","r","b","l"]),qe=()=>{},U=(n,...t)=>n.bind(0,...t),Ke=n=>{let t;const o=n?xt:kn,s=n?nn:vo;return[r=>{s(t),t=o(()=>r(),we(n)?n():n)},()=>s(t)]},sn=(n,t)=>{const{_:o,v:s,p:r,S:i}=t||{};let l,c,a,d,m=qe;const u=function(g){m(),nn(l),d=l=c=void 0,m=qe,n.apply(this,g)},v=p=>i&&c?i(c,p):p,f=()=>{m!==qe&&u(v(a)||a)},_=function(){const g=Ie(arguments),w=we(o)?o():o;if(Se(w)&&w>=0){const h=we(s)?s():s,k=Se(h)&&h>=0,x=w>0?xt:kn,C=w>0?nn:vo,B=v(g)||g,y=u.bind(0,B);let b;m(),r&&!d?(y(),d=!0,b=x(()=>d=void 0,w)):(b=x(y,w),k&&!l&&(l=xt(f,h))),m=()=>C(b),c=a=B}else u(g)};return _.m=f,_},No=(n,t)=>Object.prototype.hasOwnProperty.call(n,t),be=n=>n?Object.keys(n):[],K=(n,t,o,s,r,i,l)=>{const c=[t,o,s,r,i,l];return(typeof n!="object"||Lt(n))&&!we(n)&&(n={}),Y(c,a=>{Y(a,(d,m)=>{const u=a[m];if(n===u)return!0;const v=Ne(u);if(u&&$t(u)){const f=n[m];let _=f;v&&!Ne(f)?_=[]:!v&&!$t(f)&&(_={}),n[m]=K(_,u)}else n[m]=v?u.slice():u})}),n},xo=(n,t)=>Y(K({},n),(o,s,r)=>{o===void 0?delete r[s]:o&&$t(o)&&(r[s]=xo(o))}),Vn=n=>!be(n).length,Bo=(n,t,o)=>fo(n,Wr(t,o)),Pe=n=>rn((Ne(n)?n:(n||"").split(" ")).filter(t=>t)),Sn=(n,t)=>n&&n.getAttribute(t),Un=(n,t)=>n&&n.hasAttribute(t),Te=(n,t,o)=>{Y(Pe(t),s=>{n&&n.setAttribute(s,String(o||""))})},Ee=(n,t)=>{Y(Pe(t),o=>n&&n.removeAttribute(o))},zt=(n,t)=>{const o=Pe(Sn(n,t)),s=U(Te,n,t),r=(i,l)=>{const c=new Set(o);return Y(Pe(i),a=>{c[l](a)}),Ie(c).join(" ")};return{O:i=>s(r(i,"delete")),$:i=>s(r(i,"add")),C:i=>{const l=Pe(i);return l.reduce((c,a)=>c&&o.includes(a),l.length>0)}}},Co=(n,t,o)=>(zt(n,t).O(o),U(Nn,n,t,o)),Nn=(n,t,o)=>(zt(n,t).$(o),U(Co,n,t,o)),Tt=(n,t,o,s)=>(s?Nn:Co)(n,t,o),xn=(n,t,o)=>zt(n,t).C(o),$o=n=>zt(n,"class"),Do=(n,t)=>{$o(n).O(t)},Bn=(n,t)=>($o(n).$(t),U(Do,n,t)),To=(n,t)=>{const o=t?Ft(t)&&t:document;return o?Ie(o.querySelectorAll(n)):[]},Xr=(n,t)=>{const o=t?Ft(t)&&t:document;return o&&o.querySelector(n)},ln=(n,t)=>Ft(n)&&n.matches(t),Mo=n=>ln(n,"body"),an=n=>n?Ie(n.childNodes):[],at=n=>n&&n.parentElement,Ye=(n,t)=>Ft(n)&&n.closest(t),cn=n=>document.activeElement,Zr=(n,t,o)=>{const s=Ye(n,t),r=n&&Xr(o,s),i=Ye(r,t)===s;return s&&r?s===n||r===n||i&&Ye(Ye(n,o),t)!==s:!1},Qe=n=>{Y(En(n),t=>{const o=at(t);t&&o&&o.removeChild(t)})},_e=(n,t)=>U(Qe,n&&t&&Y(En(t),o=>{o&&n.appendChild(o)})),Je=n=>{const t=document.createElement("div");return Te(t,"class",n),t},Ao=n=>{const t=Je();return t.innerHTML=n.trim(),Y(an(t),o=>Qe(o))},jn=(n,t)=>n.getPropertyValue(t)||n[t]||"",Oo=n=>{const t=n||0;return isFinite(t)?t:0},kt=n=>Oo(parseFloat(n||"")),dn=n=>Math.round(n*1e4)/1e4,Lo=n=>`${dn(Oo(n))}px`;function it(n,t){n&&t&&Y(t,(o,s)=>{try{const r=n.style,i=Lt(o)||bn(o)?"":Se(o)?Lo(o):o;s.indexOf("--")===0?r.setProperty(s,i):r[s]=i}catch{}})}function Ae(n,t,o){const s=ct(t);let r=s?"":{};if(n){const i=ve.getComputedStyle(n,o)||n.style;r=s?jn(i,t):Ie(t).reduce((l,c)=>(l[c]=jn(i,c),l),r)}return r}const qn=(n,t,o)=>{const s=t?`${t}-`:"",r=o?`-${o}`:"",i=`${s}top${r}`,l=`${s}right${r}`,c=`${s}bottom${r}`,a=`${s}left${r}`,d=Ae(n,[i,l,c,a]);return{t:kt(d[i]),r:kt(d[l]),b:kt(d[c]),l:kt(d[a])}},Qr=(n,t)=>`translate${Ct(n)?`(${n.x},${n.y})`:`Y(${n})`}`,es=n=>!!(n.offsetWidth||n.offsetHeight||n.getClientRects().length),ts={w:0,h:0},Ut=(n,t)=>t?{w:t[`${n}Width`],h:t[`${n}Height`]}:ts,ns=n=>Ut("inner",n||ve),Xe=U(Ut,"offset"),Fo=U(Ut,"client"),Mt=U(Ut,"scroll"),Cn=n=>{const t=parseFloat(Ae(n,Rt))||0,o=parseFloat(Ae(n,Ht))||0;return{w:t-tn(t),h:o-tn(o)}},Jt=n=>n.getBoundingClientRect(),os=n=>!!n&&es(n),un=n=>!!(n&&(n[Ht]||n[Rt])),Ro=(n,t)=>{const o=un(n);return!un(t)&&o},Pn=(n,t,o,s)=>{Y(Pe(t),r=>{n&&n.removeEventListener(r,o,s)})},Q=(n,t,o,s)=>{var r;const i=(r=s&&s.H)!=null?r:!0,l=s&&s.I||!1,c=s&&s.A||!1,a={passive:i,capture:l};return U(ge,Pe(t).map(d=>{const m=c?u=>{Pn(n,d,m,l),o&&o(u)}:o;return n&&n.addEventListener(d,m,a),U(Pn,n,d,m,l)}))},Ho=n=>n.stopPropagation(),mn=n=>n.preventDefault(),Io=n=>Ho(n)||mn(n),Ve=(n,t)=>{const{x:o,y:s}=Se(t)?{x:t,y:t}:t||{};Se(o)&&(n.scrollLeft=o),Se(s)&&(n.scrollTop=s)},he=n=>({x:n.scrollLeft,y:n.scrollTop}),zo=()=>({D:{x:0,y:0},M:{x:0,y:0}}),rs=(n,t)=>{const{D:o,M:s}=n,{w:r,h:i}=t,l=(u,v,f)=>{let _=In(u)*f,p=In(v)*f;if(_===p){const g=Nt(u),w=Nt(v);p=g>w?0:p,_=g<w?0:_}return _=_===p?0:_,[_+0,p+0]},[c,a]=l(o.x,s.x,r),[d,m]=l(o.y,s.y,i);return{D:{x:c,y:d},M:{x:a,y:m}}},Gn=({D:n,M:t})=>{const o=(s,r)=>s===0&&s<=r;return{x:o(n.x,t.x),y:o(n.y,t.y)}},Wn=({D:n,M:t},o)=>{const s=(r,i,l)=>Bo(0,1,(r-l)/(r-i)||0);return{x:s(n.x,t.x,o.x),y:s(n.y,t.y,o.y)}},fn=n=>{n&&n.focus&&n.focus({preventScroll:!0})},Kn=(n,t)=>{Y(En(t),n)},vn=n=>{const t=new Map,o=(i,l)=>{if(i){const c=t.get(i);Kn(a=>{c&&c[a?"delete":"clear"](a)},l)}else t.forEach(c=>{c.clear()}),t.clear()},s=(i,l)=>{if(ct(i)){const d=t.get(i)||new Set;return t.set(i,d),Kn(m=>{we(m)&&d.add(m)},l),U(o,i,l)}bn(l)&&l&&o();const c=be(i),a=[];return Y(c,d=>{const m=i[d];m&&ne(a,s(d,m))}),U(ge,a)},r=(i,l)=>{Y(Ie(t.get(i)),c=>{l&&!on(l)?c.apply(0,l):c()})};return s(n||{}),[s,o,r]},Yn=n=>JSON.stringify(n,(t,o)=>{if(we(o))throw 0;return o}),Jn=(n,t)=>n?`${t}`.split(".").reduce((o,s)=>o&&No(o,s)?o[s]:void 0,n):void 0,ss={paddingAbsolute:!1,showNativeOverlaidScrollbars:!1,update:{elementEvents:[["img","load"]],debounce:[0,33],attributes:null,ignoreMutation:null},overflow:{x:"scroll",y:"scroll"},scrollbars:{theme:"os-theme-dark",visibility:"auto",autoHide:"never",autoHideDelay:1300,autoHideSuspend:!1,dragScroll:!0,clickScroll:!1,pointers:["mouse","touch","pen"]}},Uo=(n,t)=>{const o={},s=lt(be(t),be(n));return Y(s,r=>{const i=n[r],l=t[r];if(Ct(i)&&Ct(l))K(o[r]={},Uo(i,l)),Vn(o[r])&&delete o[r];else if(No(t,r)&&l!==i){let c=!0;if(Ne(i)||Ne(l))try{Yn(i)===Yn(l)&&(c=!1)}catch{}c&&(o[r]=l)}}),o},Xn=(n,t,o)=>s=>[Jn(n,s),o||Jn(t,s)!==void 0],tt="data-overlayscrollbars",Vt="os-environment",wt=`${Vt}-scrollbar-hidden`,Xt=`${tt}-initialize`,St="noClipping",Zn=`${tt}-body`,He=tt,ls="host",Me=`${tt}-viewport`,as=Eo,is=Vo,cs="arrange",jo="measuring",ds="scrolling",qo="scrollbarHidden",us="noContent",pn=`${tt}-padding`,Qn=`${tt}-content`,$n="os-size-observer",ms=`${$n}-appear`,fs=`${$n}-listener`,vs="os-trinsic-observer",ps="os-theme-none",ke="os-scrollbar",_s=`${ke}-rtl`,hs=`${ke}-horizontal`,gs=`${ke}-vertical`,Po=`${ke}-track`,Dn=`${ke}-handle`,ks=`${ke}-visible`,ws=`${ke}-cornerless`,eo=`${ke}-interaction`,to=`${ke}-unusable`,_n=`${ke}-auto-hide`,no=`${_n}-hidden`,oo=`${ke}-wheel`,bs=`${Po}-interactive`,ys=`${Dn}-interactive`;let Go;const Es=()=>Go,Vs=n=>{Go=n};let Zt;const Ss=()=>{const n=(k,x,C)=>{_e(document.body,k),_e(document.body,k);const H=Fo(k),B=Xe(k),y=Cn(x);return C&&Qe(k),{x:B.h-H.h+y.h,y:B.w-H.w+y.w}},t=k=>{let x=!1;const C=Bn(k,wt);try{x=Ae(k,"scrollbar-width")==="none"||Ae(k,"display","::-webkit-scrollbar")==="none"}catch{}return C(),x},o=`.${Vt}{scroll-behavior:auto!important;position:fixed;opacity:0;visibility:hidden;overflow:scroll;height:200px;width:200px;z-index:-1}.${Vt} div{width:200%;height:200%;margin:10px 0}.${wt}{scrollbar-width:none!important}.${wt}::-webkit-scrollbar,.${wt}::-webkit-scrollbar-corner{appearance:none!important;display:none!important;width:0!important;height:0!important}`,r=Ao(`<div class="${Vt}"><div></div><style>${o}</style></div>`)[0],i=r.firstChild,l=r.lastChild,c=Es();c&&(l.nonce=c);const[a,,d]=vn(),[m,u]=pe({o:n(r,i),i:Et},U(n,r,i,!0)),[v]=u(),f=t(r),_={x:v.x===0,y:v.y===0},p={elements:{host:null,padding:!f,viewport:k=>f&&Mo(k)&&k,content:!1},scrollbars:{slot:!0},cancel:{nativeScrollbarsOverlaid:!1,body:null}},g=K({},ss),w=U(K,{},g),M=U(K,{},p),h={T:v,k:_,R:f,V:!!yt,L:U(a,"r"),U:M,P:k=>K(p,k)&&M(),N:w,q:k=>K(g,k)&&w(),B:K({},p),F:K({},g)};if(Ee(r,"style"),Qe(r),Q(ve,"resize",()=>{d("r",[])}),we(ve.matchMedia)&&!f&&(!_.x||!_.y)){const k=x=>{const C=ve.matchMedia(`(resolution: ${ve.devicePixelRatio}dppx)`);Q(C,"change",()=>{x(),k(x)},{A:!0})};k(()=>{const[x,C]=m();K(h.T,x),d("r",[C])})}return h},Be=()=>(Zt||(Zt=Ss()),Zt),Wo=(n,t)=>we(t)?t.apply(0,n):t,Ns=(n,t,o,s)=>{const r=wn(s)?o:s;return Wo(n,r)||t.apply(0,n)},Ko=(n,t,o,s)=>{const r=wn(s)?o:s,i=Wo(n,r);return!!i&&(Dt(i)?i:t.apply(0,n))},xs=(n,t)=>{const{nativeScrollbarsOverlaid:o,body:s}=t||{},{k:r,R:i,U:l}=Be(),{nativeScrollbarsOverlaid:c,body:a}=l().cancel,d=o??c,m=wn(s)?a:s,u=(r.x||r.y)&&d,v=n&&(Lt(m)?!i:m);return!!u||!!v},Tn=new WeakMap,Bs=(n,t)=>{Tn.set(n,t)},Cs=n=>{Tn.delete(n)},Yo=n=>Tn.get(n),$s=(n,t,o)=>{let s=!1;const r=o?new WeakMap:!1,i=()=>{s=!0},l=c=>{if(r&&o){const a=o.map(d=>{const[m,u]=d||[];return[u&&m?(c||To)(m,n):[],u]});Y(a,d=>Y(d[0],m=>{const u=d[1],v=r.get(m)||[];if(n.contains(m)&&u){const _=Q(m,u,p=>{s?(_(),r.delete(m)):t(p)});r.set(m,ne(v,_))}else ge(v),r.delete(m)}))}};return l(),[i,l]},ro=(n,t,o,s)=>{let r=!1;const{j:i,X:l,Y:c,W:a,J:d,G:m}=s||{},u=sn(()=>r&&o(!0),{_:33,v:99}),[v,f]=$s(n,u,c),_=i||[],p=l||[],g=lt(_,p),w=(h,k)=>{if(!on(k)){const x=d||qe,C=m||qe,H=[],B=[];let y=!1,b=!1;if(Y(k,V=>{const{attributeName:S,target:D,type:E,oldValue:O,addedNodes:L,removedNodes:q}=V,W=E==="attributes",G=E==="childList",oe=n===D,$=W&&S,T=$&&Sn(D,S||""),A=ct(T)?T:null,F=$&&O!==A,N=po(p,S)&&F;if(t&&(G||!oe)){const I=W&&F,R=I&&a&&ln(D,a),P=(R?!x(D,S,O,A):!W||I)&&!C(V,!!R,n,s);Y(L,J=>ne(H,J)),Y(q,J=>ne(H,J)),b=b||P}!t&&oe&&F&&!x(D,S,O,A)&&(ne(B,S),y=y||N)}),f(V=>rn(H).reduce((S,D)=>(ne(S,To(V,D)),ln(D,V)?ne(S,D):S),[])),t)return!h&&b&&o(!1),[!1];if(!on(B)||y){const V=[rn(B),y];return!h&&o.apply(0,V),V}}},M=new Kr(U(w,!1));return[()=>(M.observe(n,{attributes:!0,attributeOldValue:!0,attributeFilter:g,subtree:t,childList:t,characterData:t}),r=!0,()=>{r&&(v(),M.disconnect(),r=!1)}),()=>{if(r)return u.m(),w(!0,M.takeRecords())}]},Jo={},Xo={},Ds=n=>{Y(n,t=>Y(t,(o,s)=>{Jo[s]=t[s]}))},Zo=(n,t,o)=>be(n).map(s=>{const{static:r,instance:i}=n[s],[l,c,a]=o||[],d=o?i:r;if(d){const m=o?d(l,c,t):d(t);return(a||Xo)[s]=m}}),dt=n=>Xo[n],Ts="__osOptionsValidationPlugin",Ms="__osSizeObserverPlugin",As=(n,t)=>{const{k:o}=t,[s,r]=n("showNativeOverlaidScrollbars");return[s&&o.x&&o.y,r]},et=n=>n.indexOf(Re)===0,Os=(n,t)=>{const o=(r,i,l,c)=>{const a=r===Re?je:r.replace(`${Re}-`,""),d=et(r),m=et(l);return!i&&!c?je:d&&m?Re:d?i&&c?a:i?Re:je:i?a:m&&c?Re:je},s={x:o(t.x,n.x,t.y,n.y),y:o(t.y,n.y,t.x,n.x)};return{K:s,Z:{x:s.x===Ze,y:s.y===Ze}}},Qo="__osScrollbarsHidingPlugin",Ls="__osClickScrollPlugin",er=(n,t,o)=>{const{dt:s}=o||{},r=dt(Ms),[i]=pe({o:!1,u:!0});return()=>{const l=[],a=Ao(`<div class="${$n}"><div class="${fs}"></div></div>`)[0],d=a.firstChild,m=u=>{const v=u instanceof ResizeObserverEntry;let f=!1,_=!1;if(v){const[p,,g]=i(u.contentRect),w=un(p);_=Ro(p,g),f=!_&&!w}else _=u===!0;f||t({ft:!0,dt:_})};if(Bt){const u=new Bt(v=>m(v.pop()));u.observe(d),ne(l,()=>{u.disconnect()})}else if(r){const[u,v]=r(d,m,s);ne(l,lt([Bn(a,ms),Q(a,"animationstart",u)],v))}else return qe;return U(ge,ne(l,_e(n,a)))}},Fs=(n,t)=>{let o;const s=a=>a.h===0||a.isIntersecting||a.intersectionRatio>0,r=Je(vs),[i]=pe({o:!1}),l=(a,d)=>{if(a){const m=i(s(a)),[,u]=m;return u&&!d&&t(m)&&[m]}},c=(a,d)=>l(d.pop(),a);return[()=>{const a=[];if(zn)o=new zn(U(c,!1),{root:n}),o.observe(r),ne(a,()=>{o.disconnect()});else{const d=()=>{const m=Xe(r);l(m)};ne(a,er(r,d)()),d()}return U(ge,ne(a,_e(n,r)))},()=>o&&c(!0,o.takeRecords())]},Rs=(n,t,o,s)=>{let r,i,l,c,a,d;const m=`[${He}]`,u=`[${Me}]`,v=["id","class","style","open","wrap","cols","rows"],{vt:f,ht:_,ot:p,gt:g,bt:w,nt:M,wt:h,yt:k,St:x,Ot:C}=n,H=N=>Ae(N,"direction")==="rtl",B={$t:!1,ct:H(f)},y=Be(),b=dt(Qo),[V]=pe({i:So,o:{w:0,h:0}},()=>{const N=b&&b.tt(n,t,B,y,o).ut,R=!(h&&M)&&xn(_,He,St),z=!M&&k(cs),P=z&&he(g),J=P&&C(),se=x(jo,R),ee=z&&N&&N()[0],ce=Mt(p),j=Cn(p);return ee&&ee(),Ve(g,P),J&&J(),R&&se(),{w:ce.w+j.w,h:ce.h+j.h}}),S=sn(s,{_:()=>r,v:()=>i,S(N,I){const[R]=N,[z]=I;return[lt(be(R),be(z)).reduce((P,J)=>(P[J]=R[J]||z[J],P),{})]}}),D=N=>{const I=H(f);K(N,{Ct:d!==I}),K(B,{ct:I}),d=I},E=(N,I)=>{const[R,z]=N,P={xt:z};return K(B,{$t:R}),!I&&s(P),P},O=({ft:N,dt:I})=>{const z=!(N&&!I)&&y.R?S:s,P={ft:N||I,dt:I};D(P),z(P)},L=(N,I)=>{const[,R]=V(),z={Ht:R};return D(z),R&&!I&&(N?s:S)(z),z},q=(N,I,R)=>{const z={Et:I};return D(z),I&&!R&&S(z),z},[W,G]=w?Fs(_,E):[],oe=!M&&er(_,O,{dt:!0}),[$,T]=ro(_,!1,q,{X:v,j:v}),A=M&&Bt&&new Bt(N=>{const I=N[N.length-1].contentRect;O({ft:!0,dt:Ro(I,a)}),a=I}),F=sn(()=>{const[,N]=V();s({Ht:N})},{_:222,p:!0});return[()=>{A&&A.observe(_);const N=oe&&oe(),I=W&&W(),R=$(),z=y.L(P=>{P?S({zt:P}):F()});return()=>{A&&A.disconnect(),N&&N(),I&&I(),c&&c(),R(),z()}},({It:N,At:I,Dt:R})=>{const z={},[P]=N("update.ignoreMutation"),[J,se]=N("update.attributes"),[ee,ce]=N("update.elementEvents"),[j,de]=N("update.debounce"),me=ce||se,ae=I||R,ue=re=>we(P)&&P(re);if(me){l&&l(),c&&c();const[re,le]=ro(w||p,!0,L,{j:lt(v,J||[]),Y:ee,W:m,G:(X,te)=>{const{target:ie,attributeName:fe}=X;return(!te&&fe&&!M?Zr(ie,m,u):!1)||!!Ye(ie,`.${ke}`)||!!ue(X)}});c=re(),l=le}if(de)if(S.m(),Ne(j)){const re=j[0],le=j[1];r=Se(re)&&re,i=Se(le)&&le}else Se(j)?(r=j,i=!1):(r=!1,i=!1);if(ae){const re=T(),le=G&&G(),X=l&&l();re&&K(z,q(re[0],re[1],ae)),le&&K(z,E(le[0],ae)),X&&K(z,L(X[0],ae))}return D(z),z},B]},Hs=(n,t,o,s)=>{const r="--os-viewport-percent",i="--os-scroll-percent",l="--os-scroll-direction",{U:c}=Be(),{scrollbars:a}=c(),{slot:d}=a,{vt:m,ht:u,ot:v,Mt:f,gt:_,wt:p,nt:g}=t,{scrollbars:w}=f?{}:n,{slot:M}=w||{},h=[],k=[],x=[],C=Ko([m,u,v],()=>g&&p?m:u,d,M),H=$=>{if(yt){const T=new yt({source:_,axis:$});return{kt:F=>{const N=F.Tt.animate({clear:["left"],[i]:[0,1]},{timeline:T});return()=>N.cancel()}}}},B={x:H("x"),y:H("y")},y=()=>{const{Rt:$,Vt:T}=o,A=(F,N)=>Bo(0,1,F/(F+N)||0);return{x:A(T.x,$.x),y:A(T.y,$.y)}},b=($,T,A)=>{const F=A?Bn:Do;Y($,N=>{F(N.Tt,T)})},V=($,T)=>{Y($,A=>{const[F,N]=T(A);it(F,N)})},S=($,T,A)=>{const F=bn(A),N=F?A:!0,I=F?!A:!0;N&&b(k,$,T),I&&b(x,$,T)},D=()=>{const $=y(),T=A=>F=>[F.Tt,{[r]:dn(A)+""}];V(k,T($.x)),V(x,T($.y))},E=()=>{if(!yt){const{Lt:$}=o,T=Wn($,he(_)),A=F=>N=>[N.Tt,{[i]:dn(F)+""}];V(k,A(T.x)),V(x,A(T.y))}},O=()=>{const{Lt:$}=o,T=Gn($),A=F=>N=>[N.Tt,{[l]:F?"0":"1"}];V(k,A(T.x)),V(x,A(T.y))},L=()=>{if(g&&!p){const{Rt:$,Lt:T}=o,A=Gn(T),F=Wn(T,he(_)),N=I=>{const{Tt:R}=I,z=at(R)===v&&R,P=(J,se,ee)=>{const ce=se*J;return Lo(ee?ce:-ce)};return[z,z&&{transform:Qr({x:P(F.x,$.x,A.x),y:P(F.y,$.y,A.y)})}]};V(k,N),V(x,N)}},q=$=>{const T=$?"x":"y",F=Je(`${ke} ${$?hs:gs}`),N=Je(Po),I=Je(Dn),R={Tt:F,Ut:N,Pt:I},z=B[T];return ne($?k:x,R),ne(h,[_e(F,N),_e(N,I),U(Qe,F),z&&z.kt(R),s(R,S,$)]),R},W=U(q,!0),G=U(q,!1),oe=()=>(_e(C,k[0].Tt),_e(C,x[0].Tt),U(ge,h));return W(),G(),[{Nt:D,qt:E,Bt:O,Ft:L,jt:S,Xt:{Yt:k,Wt:W,Jt:U(V,k)},Gt:{Yt:x,Wt:G,Jt:U(V,x)}},oe]},Is=(n,t,o,s)=>(r,i,l)=>{const{ht:c,ot:a,nt:d,gt:m,Kt:u,Ot:v}=t,{Tt:f,Ut:_,Pt:p}=r,[g,w]=Ke(333),[M,h]=Ke(444),k=H=>{we(m.scrollBy)&&m.scrollBy({behavior:"smooth",left:H.x,top:H.y})},x=()=>{const H="pointerup pointercancel lostpointercapture",B=`client${l?"X":"Y"}`,y=l?Rt:Ht,b=l?"left":"top",V=l?"w":"h",S=l?"x":"y",D=(O,L)=>q=>{const{Rt:W}=o,G=Xe(_)[V]-Xe(p)[V],$=L*q/G*W[S];Ve(m,{[S]:O+$})},E=[];return Q(_,"pointerdown",O=>{const L=Ye(O.target,`.${Dn}`)===p,q=L?p:_,W=n.scrollbars,G=W[L?"dragScroll":"clickScroll"],{button:oe,isPrimary:$,pointerType:T}=O,{pointers:A}=W;if(oe===0&&$&&G&&(A||[]).includes(T)){ge(E),h();const N=!L&&(O.shiftKey||G==="instant"),I=U(Jt,p),R=U(Jt,_),z=(te,ie)=>(te||I())[b]-(ie||R())[b],P=tn(Jt(m)[y])/Xe(m)[V]||1,J=D(he(m)[S],1/P),se=O[B],ee=I(),ce=R(),j=ee[y],de=z(ee,ce)+j/2,me=se-ce[b],ae=L?0:me-de,ue=te=>{ge(X),q.releasePointerCapture(te.pointerId)},re=L||N,le=v(),X=[Q(u,H,ue),Q(u,"selectstart",te=>mn(te),{H:!1}),Q(_,H,ue),re&&Q(_,"pointermove",te=>J(ae+(te[B]-se))),re&&(()=>{const te=he(m);le();const ie=he(m),fe={x:ie.x-te.x,y:ie.y-te.y};(Nt(fe.x)>3||Nt(fe.y)>3)&&(v(),Ve(m,te),k(fe),M(le))})];if(q.setPointerCapture(O.pointerId),N)J(ae);else if(!L){const te=dt(Ls);if(te){const ie=te(J,ae,j,fe=>{fe?le():ne(X,le)});ne(X,ie),ne(E,U(ie,!0))}}}})};let C=!0;return U(ge,[Q(p,"pointermove pointerleave",s),Q(f,"pointerenter",()=>{i(eo,!0)}),Q(f,"pointerleave pointercancel",()=>{i(eo,!1)}),!d&&Q(f,"mousedown",()=>{const H=cn();(Un(H,Me)||Un(H,He)||H===document.body)&&xt(U(fn,a),25)}),Q(f,"wheel",H=>{const{deltaX:B,deltaY:y,deltaMode:b}=H;C&&b===0&&at(f)===c&&k({x:B,y}),C=!1,i(oo,!0),g(()=>{C=!0,i(oo)}),mn(H)},{H:!1,I:!0}),Q(f,"pointerdown",U(Q,u,"click",Io,{A:!0,I:!0,H:!1}),{I:!0}),x(),w,h])},zs=(n,t,o,s,r,i)=>{let l,c,a,d,m,u=qe,v=0;const f=$=>$.pointerType==="mouse",[_,p]=Ke(),[g,w]=Ke(100),[M,h]=Ke(100),[k,x]=Ke(()=>v),[C,H]=Hs(n,r,s,Is(t,r,s,$=>f($)&&q())),{ht:B,Qt:y,wt:b}=r,{jt:V,Nt:S,qt:D,Bt:E,Ft:O}=C,L=($,T)=>{if(x(),$)V(no);else{const A=U(V,no,!0);v>0&&!T?k(A):A()}},q=()=>{(a?!l:!d)&&(L(!0),g(()=>{L(!1)}))},W=$=>{V(_n,$,!0),V(_n,$,!1)},G=$=>{f($)&&(l=a,a&&L(!0))},oe=[x,w,h,p,()=>u(),Q(B,"pointerover",G,{A:!0}),Q(B,"pointerenter",G),Q(B,"pointerleave",$=>{f($)&&(l=!1,a&&L(!1))}),Q(B,"pointermove",$=>{f($)&&c&&q()}),Q(y,"scroll",$=>{_(()=>{D(),q()}),i($),O()})];return[()=>U(ge,ne(oe,H())),({It:$,Dt:T,Zt:A,tn:F})=>{const{nn:N,sn:I,en:R,cn:z}=F||{},{Ct:P,dt:J}=A||{},{ct:se}=o,{k:ee}=Be(),{K:ce,rn:j}=s,[de,me]=$("showNativeOverlaidScrollbars"),[ae,ue]=$("scrollbars.theme"),[re,le]=$("scrollbars.visibility"),[X,te]=$("scrollbars.autoHide"),[ie,fe]=$("scrollbars.autoHideSuspend"),[nt]=$("scrollbars.autoHideDelay"),[ut,mt]=$("scrollbars.dragScroll"),[ft,ze]=$("scrollbars.clickScroll"),[Ge,qt]=$("overflow"),Pt=J&&!T,Gt=j.x||j.y,Wt=N||I||z||P||T,ye=R||le||qt,Kt=de&&ee.x&&ee.y,ot=(rt,Le,vt)=>{const st=rt.includes(Ze)&&(re===Re||re==="auto"&&Le===Ze);return V(ks,st,vt),st};if(v=nt,Pt&&(ie&&Gt?(W(!1),u(),M(()=>{u=Q(y,"scroll",U(W,!0),{A:!0})})):W(!0)),me&&V(ps,Kt),ue&&(V(m),V(ae,!0),m=ae),fe&&!ie&&W(!0),te&&(c=X==="move",a=X==="leave",d=X==="never",L(d,!0)),mt&&V(ys,ut),ze&&V(bs,!!ft),ye){const rt=ot(Ge.x,ce.x,!0),Le=ot(Ge.y,ce.y,!1);V(ws,!(rt&&Le))}Wt&&(D(),S(),O(),z&&E(),V(to,!j.x,!0),V(to,!j.y,!1),V(_s,se&&!b))},{},C]},Us=n=>{const t=Be(),{U:o,R:s}=t,{elements:r}=o(),{padding:i,viewport:l,content:c}=r,a=Dt(n),d=a?{}:n,{elements:m}=d,{padding:u,viewport:v,content:f}=m||{},_=a?n:d.target,p=Mo(_),g=_.ownerDocument,w=g.documentElement,M=()=>g.defaultView||ve,h=U(Ns,[_]),k=U(Ko,[_]),x=U(Je,""),C=U(h,x,l),H=U(k,x,c),B=j=>{const de=Xe(j),me=Mt(j),ae=Ae(j,Eo),ue=Ae(j,Vo);return me.w-de.w>0&&!et(ae)||me.h-de.h>0&&!et(ue)},y=C(v),b=y===_,V=b&&p,S=!b&&H(f),D=!b&&y===S,E=V?w:y,O=V?E:_,L=!b&&k(x,i,u),q=!D&&S,W=[q,E,L,O].map(j=>Dt(j)&&!at(j)&&j),G=j=>j&&po(W,j),oe=!G(E)&&B(E)?E:_,$=V?w:E,A={vt:_,ht:O,ot:E,ln:L,bt:q,gt:$,Qt:V?g:E,an:p?w:oe,Kt:g,wt:p,Mt:a,nt:b,un:M,yt:j=>xn(E,Me,j),St:(j,de)=>Tt(E,Me,j,de),Ot:()=>Tt($,Me,ds,!0)},{vt:F,ht:N,ln:I,ot:R,bt:z}=A,P=[()=>{Ee(N,[He,Xt]),Ee(F,Xt),p&&Ee(w,[Xt,He])}];let J=an([z,R,I,N,F].find(j=>j&&!G(j)));const se=V?F:z||R,ee=U(ge,P);return[A,()=>{const j=M(),de=cn(),me=X=>{_e(at(X),an(X)),Qe(X)},ae=X=>Q(X,"focusin focusout focus blur",Io,{I:!0,H:!1}),ue="tabindex",re=Sn(R,ue),le=ae(de);return Te(N,He,b?"":ls),Te(I,pn,""),Te(R,Me,""),Te(z,Qn,""),b||(Te(R,ue,re||"-1"),p&&Te(w,Zn,"")),_e(se,J),_e(N,I),_e(I||N,!b&&R),_e(R,z),ne(P,[le,()=>{const X=cn(),te=G(R),ie=te&&X===R?F:X,fe=ae(ie);Ee(I,pn),Ee(z,Qn),Ee(R,Me),p&&Ee(w,Zn),re?Te(R,ue,re):Ee(R,ue),G(z)&&me(z),te&&me(R),G(I)&&me(I),fn(ie),fe()}]),s&&!b&&(Nn(R,Me,qo),ne(P,U(Ee,R,Me))),fn(!b&&p&&de===F&&j.top===j?R:de),le(),J=0,ee},ee]},js=({bt:n})=>({Zt:t,_n:o,Dt:s})=>{const{xt:r}=t||{},{$t:i}=o;n&&(r||s)&&it(n,{[Ht]:i&&"100%"})},qs=({ht:n,ln:t,ot:o,nt:s},r)=>{const[i,l]=pe({i:Jr,o:qn()},U(qn,n,"padding",""));return({It:c,Zt:a,_n:d,Dt:m})=>{let[u,v]=l(m);const{R:f}=Be(),{ft:_,Ht:p,Ct:g}=a||{},{ct:w}=d,[M,h]=c("paddingAbsolute");(_||v||(m||p))&&([u,v]=i(m));const x=!s&&(h||g||v);if(x){const C=!M||!t&&!f,H=u.r+u.l,B=u.t+u.b,y={[bo]:C&&!w?-H:0,[yo]:C?-B:0,[wo]:C&&w?-H:0,top:C?-u.t:0,right:C?w?-u.r:"auto":0,left:C?w?"auto":-u.l:0,[Rt]:C&&`calc(100% + ${H}px)`},b={[_o]:C?u.t:0,[ho]:C?u.r:0,[ko]:C?u.b:0,[go]:C?u.l:0};it(t||o,y),it(o,b),K(r,{ln:u,dn:!C,rt:t?b:K({},y,b)})}return{fn:x}}},Ps=(n,t)=>{const o=Be(),{ht:s,ln:r,ot:i,nt:l,Qt:c,gt:a,wt:d,St:m,un:u}=n,{R:v}=o,f=d&&l,_=U(fo,0),p={display:()=>!1,direction:T=>T!=="ltr",flexDirection:T=>T.endsWith("-reverse"),writingMode:T=>T!=="horizontal-tb"},g=be(p),w={i:So,o:{w:0,h:0}},M={i:Et,o:{}},h=T=>{m(jo,!f&&T)},k=T=>{if(!g.some(se=>{const ee=T[se];return ee&&p[se](ee)}))return{D:{x:0,y:0},M:{x:1,y:1}};h(!0);const F=he(a),N=m(us,!0),I=Q(c,Ze,se=>{const ee=he(a);se.isTrusted&&ee.x===F.x&&ee.y===F.y&&Ho(se)},{I:!0,A:!0});Ve(a,{x:0,y:0}),N();const R=he(a),z=Mt(a);Ve(a,{x:z.w,y:z.h});const P=he(a);Ve(a,{x:P.x-R.x<1&&-z.w,y:P.y-R.y<1&&-z.h});const J=he(a);return Ve(a,F),kn(()=>I()),{D:R,M:J}},x=(T,A)=>{const F=ve.devicePixelRatio%1!==0?1:0,N={w:_(T.w-A.w),h:_(T.h-A.h)};return{w:N.w>F?N.w:0,h:N.h>F?N.h:0}},[C,H]=pe(w,U(Cn,i)),[B,y]=pe(w,U(Mt,i)),[b,V]=pe(w),[S]=pe(M),[D,E]=pe(w),[O]=pe(M),[L]=pe({i:(T,A)=>It(T,A,g),o:{}},()=>os(i)?Ae(i,g):{}),[q,W]=pe({i:(T,A)=>Et(T.D,A.D)&&Et(T.M,A.M),o:zo()}),G=dt(Qo),oe=(T,A)=>`${A?as:is}${Yr(T)}`,$=T=>{const A=N=>[Re,je,Ze].map(I=>oe(I,N)),F=A(!0).concat(A()).join(" ");m(F),m(be(T).map(N=>oe(T[N],N==="x")).join(" "),!0)};return({It:T,Zt:A,_n:F,Dt:N},{fn:I})=>{const{ft:R,Ht:z,Ct:P,dt:J,zt:se}=A||{},ee=G&&G.tt(n,t,F,o,T),{it:ce,ut:j,_t:de}=ee||{},[me,ae]=As(T,o),[ue,re]=T("overflow"),le=et(ue.x),X=et(ue.y),te=!0;let ie=H(N),fe=y(N),nt=V(N),ut=E(N);ae&&v&&m(qo,!me);{xn(s,He,St)&&h(!0);const[Fn]=j?j():[],[pt]=ie=C(N),[_t]=fe=B(N),ht=Fo(i),gt=f&&ns(u()),xr={w:_(_t.w+pt.w),h:_(_t.h+pt.h)},Rn={w:_((gt?gt.w:ht.w+_(ht.w-_t.w))+pt.w),h:_((gt?gt.h:ht.h+_(ht.h-_t.h))+pt.h)};Fn&&Fn(),ut=D(Rn),nt=b(x(xr,Rn),N)}const[mt,ft]=ut,[ze,Ge]=nt,[qt,Pt]=fe,[Gt,Wt]=ie,[ye,Kt]=S({x:ze.w>0,y:ze.h>0}),ot=le&&X&&(ye.x||ye.y)||le&&ye.x&&!ye.y||X&&ye.y&&!ye.x,rt=I||P||se||Wt||Pt||ft||Ge||re||ae||te,Le=Os(ye,ue),[vt,st]=O(Le.K),[Er,Vr]=L(N),Ln=P||J||Vr||Kt||N,[Sr,Nr]=Ln?q(k(Er),N):W();return rt&&(st&&$(Le.K),de&&ce&&it(i,de(Le,F,ce(Le,qt,Gt)))),h(!1),Tt(s,He,St,ot),Tt(r,pn,St,ot),K(t,{K:vt,Vt:{x:mt.w,y:mt.h},Rt:{x:ze.w,y:ze.h},rn:ye,Lt:rs(Sr,ze)}),{en:st,nn:ft,sn:Ge,cn:Nr||Ge,vn:Ln}}},Gs=n=>{const[t,o,s]=Us(n),r={ln:{t:0,r:0,b:0,l:0},dn:!1,rt:{[bo]:0,[yo]:0,[wo]:0,[_o]:0,[ho]:0,[ko]:0,[go]:0},Vt:{x:0,y:0},Rt:{x:0,y:0},K:{x:je,y:je},rn:{x:!1,y:!1},Lt:zo()},{vt:i,gt:l,nt:c,Ot:a}=t,{R:d,k:m}=Be(),u=!d&&(m.x||m.y),v=[js(t),qs(t,r),Ps(t,r)];return[o,f=>{const _={},g=u&&he(l),w=g&&a();return Y(v,M=>{K(_,M(f,_)||{})}),Ve(l,g),w&&w(),!c&&Ve(i,0),_},r,t,s]},Ws=(n,t,o,s,r)=>{let i=!1;const l=Xn(t,{}),[c,a,d,m,u]=Gs(n),[v,f,_]=Rs(m,d,l,k=>{h({},k)}),[p,g,,w]=zs(n,t,_,d,m,r),M=k=>be(k).some(x=>!!k[x]),h=(k,x)=>{if(o())return!1;const{pn:C,Dt:H,At:B,hn:y}=k,b=C||{},V=!!H||!i,S={It:Xn(t,b,V),pn:b,Dt:V};if(y)return g(S),!1;const D=x||f(K({},S,{At:B})),E=a(K({},S,{_n:_,Zt:D}));g(K({},S,{Zt:D,tn:E}));const O=M(D),L=M(E),q=O||L||!Vn(b)||V;return i=!0,q&&s(k,{Zt:D,tn:E}),q};return[()=>{const{an:k,gt:x,Ot:C}=m,H=he(k),B=[v(),c(),p()],y=C();return Ve(x,H),y(),U(ge,B)},h,()=>({gn:_,bn:d}),{wn:m,yn:w},u]},xe=(n,t,o)=>{const{N:s}=Be(),r=Dt(n),i=r?n:n.target,l=Yo(i);if(t&&!l){let c=!1;const a=[],d={},m=b=>{const V=xo(b),S=dt(Ts);return S?S(V,!0):V},u=K({},s(),m(t)),[v,f,_]=vn(),[p,g,w]=vn(o),M=(b,V)=>{w(b,V),_(b,V)},[h,k,x,C,H]=Ws(n,u,()=>c,({pn:b,Dt:V},{Zt:S,tn:D})=>{const{ft:E,Ct:O,xt:L,Ht:q,Et:W,dt:G}=S,{nn:oe,sn:$,en:T,cn:A}=D;M("updated",[y,{updateHints:{sizeChanged:!!E,directionChanged:!!O,heightIntrinsicChanged:!!L,overflowEdgeChanged:!!oe,overflowAmountChanged:!!$,overflowStyleChanged:!!T,scrollCoordinatesChanged:!!A,contentMutation:!!q,hostMutation:!!W,appear:!!G},changedOptions:b||{},force:!!V}])},b=>M("scroll",[y,b])),B=b=>{Cs(i),ge(a),c=!0,M("destroyed",[y,b]),f(),g()},y={options(b,V){if(b){const S=V?s():{},D=Uo(u,K(S,m(b)));Vn(D)||(K(u,D),k({pn:D}))}return K({},u)},on:p,off:(b,V)=>{b&&V&&g(b,V)},state(){const{gn:b,bn:V}=x(),{ct:S}=b,{Vt:D,Rt:E,K:O,rn:L,ln:q,dn:W,Lt:G}=V;return K({},{overflowEdge:D,overflowAmount:E,overflowStyle:O,hasOverflow:L,scrollCoordinates:{start:G.D,end:G.M},padding:q,paddingAbsolute:W,directionRTL:S,destroyed:c})},elements(){const{vt:b,ht:V,ln:S,ot:D,bt:E,gt:O,Qt:L}=C.wn,{Xt:q,Gt:W}=C.yn,G=$=>{const{Pt:T,Ut:A,Tt:F}=$;return{scrollbar:F,track:A,handle:T}},oe=$=>{const{Yt:T,Wt:A}=$,F=G(T[0]);return K({},F,{clone:()=>{const N=G(A());return k({hn:!0}),N}})};return K({},{target:b,host:V,padding:S||D,viewport:D,content:E||D,scrollOffsetElement:O,scrollEventElement:L,scrollbarHorizontal:oe(q),scrollbarVertical:oe(W)})},update:b=>k({Dt:b,At:!0}),destroy:U(B,!1),plugin:b=>d[be(b)[0]]};return ne(a,[H]),Bs(i,y),Zo(Jo,xe,[y,v,d]),xs(C.wn.wt,!r&&n.cancel)?(B(!0),y):(ne(a,h()),M("initialized",[y]),y.update(),y)}return l};xe.plugin=n=>{const t=Ne(n),o=t?n:[n],s=o.map(r=>Zo(r,xe)[0]);return Ds(o),t?s:s[0]};xe.valid=n=>{const t=n&&n.elements,o=we(t)&&t();return $t(o)&&!!Yo(o.target)};xe.env=()=>{const{T:n,k:t,R:o,V:s,B:r,F:i,U:l,P:c,N:a,q:d}=Be();return K({},{scrollbarsSize:n,scrollbarsOverlaid:t,scrollbarsHiding:o,scrollTimeline:s,staticDefaultInitialization:r,staticDefaultOptions:i,getDefaultInitialization:l,setDefaultInitialization:c,getDefaultOptions:a,setDefaultOptions:d})};xe.nonce=Vs;function Ks(){let n;const t=e.ref(null),o=Math.floor(Math.random()*2**32),s=e.ref(!1),r=e.ref([]),i=()=>r.value,l=()=>n.getSelection(),c=()=>r.value.length,a=()=>n.clearSelection(!0),d=e.ref(),m=e.ref(null),u=e.ref(null),v=e.ref(null),f=e.ref(null);function _(){n=new Dr({area:t.value,keyboardDrag:!1,selectedClass:"vf-explorer-selected",selectorClass:"vf-explorer-selector"}),n.subscribe("DS:start:pre",({items:x,event:C,isDragging:H})=>{if(H)n.Interaction._reset(C);else{s.value=!1;const B=t.value.offsetWidth-C.offsetX,y=t.value.offsetHeight-C.offsetY;B<15&&y<15&&n.Interaction._reset(C),C.target.classList.contains("os-scrollbar-handle")&&n.Interaction._reset(C)}}),document.addEventListener("dragleave",x=>{!x.buttons&&s.value&&(s.value=!1)})}const p=()=>e.nextTick(()=>{n.addSelection(n.getSelectables()),g()}),g=()=>{r.value=n.getSelection().map(x=>JSON.parse(x.dataset.item)),d.value(r.value)},w=()=>e.nextTick(()=>{const x=i().map(C=>C.path);a(),n.setSettings({selectables:document.getElementsByClassName("vf-item-"+o)}),n.addSelection(n.getSelectables().filter(C=>x.includes(JSON.parse(C.dataset.item).path))),g(),h()}),M=x=>{d.value=x,n.subscribe("DS:end",({items:C,event:H,isDragging:B})=>{r.value=C.map(y=>JSON.parse(y.dataset.item)),x(C.map(y=>JSON.parse(y.dataset.item)),y=>{typeof y<"u"&&(C.forEach(b=>{const V=JSON.parse(b.dataset.item),S=y.find(D=>D.path===V.path);typeof S<"u"&&(Object.keys(V).forEach(D=>{V[D]=S[D]}),b.dataset.item=JSON.stringify(V))}),r.value=C.map(b=>JSON.parse(b.dataset.item)))})})},h=()=>{m.value&&(t.value.getBoundingClientRect().height<t.value.scrollHeight?(u.value.style.height=t.value.scrollHeight+"px",u.value.style.display="block"):(u.value.style.height="100%",u.value.style.display="none"))},k=x=>{if(!m.value)return;const{scrollOffsetElement:C}=m.value.elements();C.scrollTo({top:t.value.scrollTop,left:0})};return e.onMounted(()=>{xe(v.value,{scrollbars:{theme:"vf-theme-dark dark:vf-theme-light"},plugins:{OverlayScrollbars:xe}},{initialized:x=>{m.value=x},scroll:(x,C)=>{const{scrollOffsetElement:H}=x.elements();t.value.scrollTo({top:H.scrollTop,left:0})}}),_(),h(),f.value=new ResizeObserver(h),f.value.observe(t.value),t.value.addEventListener("scroll",k),n.subscribe("DS:scroll",({isDragging:x})=>x||k())}),e.onUnmounted(()=>{n&&n.stop(),f.value&&f.value.disconnect()}),e.onUpdated(()=>{n&&n.Area.reset()}),{area:t,explorerId:o,isDraggingRef:s,scrollBar:u,scrollBarContainer:v,getSelected:i,getSelection:l,selectAll:p,clearSelection:a,refreshSelection:w,getCount:c,onSelect:M}}function Ys(n,t){const o=e.ref(n),s=e.ref(t),r=e.ref([]),i=e.ref([]),l=e.ref([]),c=e.ref(!1),a=e.ref(5);let d=!1,m=!1;const u=e.reactive({adapter:o,storages:[],dirname:s,files:[],cache:{}});function v(h){h.files=h.files.map(k=>{const x=k.path;return typeof u.cache[x]<"u"?u.cache[x]:k}),Object.assign(u,h)}function f(){let h=[],k=[],x=s.value??o.value+"://";x.length===0&&(r.value=[]),x.replace(o.value+"://","").split(/\/|\\/).forEach(function(B){h.push(B),h.join("/")!==""&&k.push({basename:B,name:B,path:o.value+"://"+h.join("/"),type:"dir"})}),i.value=k;const[C,H]=p(k,a.value);l.value=H,r.value=C}function _(h){a.value=h,f()}function p(h,k){return h.length>k?[h.slice(-k),h.slice(0,-k)]:[h,[]]}function g(h=null){c.value=h??!c.value}function w(){return r.value&&r.value.length&&!m}const M=e.computed(()=>{var h;return((h=r.value[r.value.length-2])==null?void 0:h.path)??o.value+"://"});return e.onMounted(()=>{}),e.watch(s,f),e.onMounted(f),{adapter:o,path:s,loading:d,searchMode:m,data:u,updateData:v,breadcrumbs:r,breadcrumbItems:i,limitBreadcrumbItems:_,hiddenBreadcrumbs:l,showHiddenBreadcrumbs:c,toggleHiddenBreadcrumbs:g,isGoUpAvailable:w,parentFolderPath:M}}function Js(n){return e.getCurrentScope()?(e.onScopeDispose(n),!0):!1}function At(n){return typeof n=="function"?n():e.unref(n)}const Xs=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Zs=n=>n!=null,so=()=>{};function tr(n,t){function o(...s){return new Promise((r,i)=>{Promise.resolve(n(()=>t.apply(this,s),{fn:t,thisArg:this,args:s})).then(r).catch(i)})}return o}const nr=n=>n();function Qs(n,t={}){let o,s,r=so;const i=c=>{clearTimeout(c),r(),r=so};return c=>{const a=At(n),d=At(t.maxWait);return o&&i(o),a<=0||d!==void 0&&d<=0?(s&&(i(s),s=null),Promise.resolve(c())):new Promise((m,u)=>{r=t.rejectOnCancel?u:m,d&&!s&&(s=setTimeout(()=>{o&&i(o),s=null,m(c())},d)),o=setTimeout(()=>{s&&i(s),s=null,m(c())},a)})}}function el(n=nr){const t=e.ref(!0);function o(){t.value=!1}function s(){t.value=!0}const r=(...i)=>{t.value&&n(...i)};return{isActive:e.readonly(t),pause:o,resume:s,eventFilter:r}}function tl(n,t=200,o={}){return tr(Qs(t,o),n)}function nl(n,t,o={}){const{eventFilter:s=nr,...r}=o;return e.watch(n,tr(s,t),r)}function lo(n,t,o={}){const{eventFilter:s,...r}=o,{eventFilter:i,pause:l,resume:c,isActive:a}=el(s);return{stop:nl(n,t,{...r,eventFilter:i}),pause:l,resume:c,isActive:a}}function ao(n,t,...[o]){const{flush:s="sync",deep:r=!1,immediate:i=!0,direction:l="both",transform:c={}}=o||{},a=[],d="ltr"in c&&c.ltr||(v=>v),m="rtl"in c&&c.rtl||(v=>v);return(l==="both"||l==="ltr")&&a.push(lo(n,v=>{a.forEach(f=>f.pause()),t.value=d(v),a.forEach(f=>f.resume())},{flush:s,deep:r,immediate:i})),(l==="both"||l==="rtl")&&a.push(lo(t,v=>{a.forEach(f=>f.pause()),n.value=m(v),a.forEach(f=>f.resume())},{flush:s,deep:r,immediate:i})),()=>{a.forEach(v=>v.stop())}}const ol=Xs?window:void 0;function rl(n){var t;const o=At(n);return(t=o==null?void 0:o.$el)!=null?t:o}function sl(){const n=e.ref(!1),t=e.getCurrentInstance();return t&&e.onMounted(()=>{n.value=!0},t),n}function ll(n){const t=sl();return e.computed(()=>(t.value,!!n()))}function al(n,t,o={}){const{window:s=ol,...r}=o;let i;const l=ll(()=>s&&"MutationObserver"in s),c=()=>{i&&(i.disconnect(),i=void 0)},a=e.computed(()=>{const v=At(n),f=(Array.isArray(v)?v:[v]).map(rl).filter(Zs);return new Set(f)}),d=e.watch(()=>a.value,v=>{c(),l.value&&v.size&&(i=new MutationObserver(t),v.forEach(f=>i.observe(f,r)))},{immediate:!0,flush:"post"}),m=()=>i==null?void 0:i.takeRecords(),u=()=>{d(),c()};return Js(u),{isSupported:l,stop:u,takeRecords:m}}const il=(n,t,o)=>{const s=Rr(n.id),r=$r(),i=s.getStore("metricUnits",!1),l=qr(s,n.theme),c=o.i18n,a=n.locale??o.locale,d=w=>Array.isArray(w)?w:zr,m=s.getStore("persist-path",n.persist),u=m?s.getStore("path",n.path):n.path,v=m?s.getStore("adapter"):null,f=Ks(),_=e.reactive({version:Ur,root:null,debug:n.debug,emitter:r,storage:s,i18n:Ir(s,a,r,c),modal:Pr(),dragSelect:e.computed(()=>f),requester:Fr(n.request),features:d(n.features),view:s.getStore("viewport","grid"),fullScreen:s.getStore("full-screen",n.fullScreen),showTreeView:s.getStore("show-tree-view",n.showTreeView),pinnedFolders:s.getStore("pinned-folders",n.pinnedFolders),treeViewData:[],selectButton:n.selectButton,maxFileSize:n.maxFileSize,theme:l,metricUnits:i,filesize:i?mo:uo,compactListView:s.getStore("compact-list-view",!0),persist:m,showThumbnails:s.getStore("show-thumbnails",n.showThumbnails),loadingIndicator:n.loadingIndicator,fs:Ys(v,u),sortActive:!1,sortColumn:"",sortOrder:"",additionalButtons:n.additionalButtons}),p=e.computed({get(){return _.view},set(w){_.view=w}}),g=e.computed({get(){return{active:_.sortActive,column:_.sortColumn,order:_.sortOrder}},set(w){w&&(_.sortActive=w.active,_.sortColumn=w.column,_.sortOrder=w.order)}});return ao(t.view,p),ao(t.sort,g),_},cl={class:"vuefinder__modal-layout__container"},dl={class:"vuefinder__modal-layout__content"},ul={class:"vuefinder__modal-layout__footer"},Ce={__name:"ModalLayout",setup(n){const t=e.ref(null),o=e.inject("ServiceContainer");return e.onMounted(()=>{const s=document.querySelector(".v-f-modal input");s&&s.focus(),e.nextTick(()=>{if(document.querySelector(".v-f-modal input")&&window.innerWidth<768){const r=t.value.getBoundingClientRect().bottom+16;window.scrollTo({top:r,left:0,behavior:"smooth"})}})}),(s,r)=>(e.openBlock(),e.createElementBlock("div",{class:"vuefinder__modal-layout","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",onKeyup:r[1]||(r[1]=e.withKeys(i=>e.unref(o).modal.close(),["esc"])),tabindex:"0"},[r[2]||(r[2]=e.createElementVNode("div",{class:"vuefinder__modal-layout__overlay"},null,-1)),e.createElementVNode("div",cl,[e.createElementVNode("div",{class:"vuefinder__modal-layout__wrapper",onMousedown:r[0]||(r[0]=e.withModifiers(i=>e.unref(o).modal.close(),["self"]))},[e.createElementVNode("div",{ref_key:"modalBody",ref:t,class:"vuefinder__modal-layout__body"},[e.createElementVNode("div",dl,[e.renderSlot(s.$slots,"default")]),e.createElementVNode("div",ul,[e.renderSlot(s.$slots,"buttons")])],512)],32)])],32))}},ml=(n,t)=>{const o=n.__vccOpts||n;for(const[s,r]of t)o[s]=r;return o},fl={props:{on:{type:String,required:!0}},setup(n,{emit:t,slots:o}){const s=e.inject("ServiceContainer"),r=e.ref(!1),{t:i}=s.i18n;let l=null;const c=()=>{clearTimeout(l),r.value=!0,l=setTimeout(()=>{r.value=!1},2e3)};return e.onMounted(()=>{s.emitter.on(n.on,c)}),e.onUnmounted(()=>{clearTimeout(l)}),{shown:r,t:i}}},vl={key:1};function pl(n,t,o,s,r,i){return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["vuefinder__action-message",{"vuefinder__action-message--hidden":!s.shown}])},[n.$slots.default?e.renderSlot(n.$slots,"default",{key:0}):(e.openBlock(),e.createElementBlock("span",vl,e.toDisplayString(s.t("Saved.")),1))],2)}const We=ml(fl,[["render",pl]]),_l={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-width":"1.5",class:"h-6 w-6 stroke-blue-600 dark:stroke-blue-100",viewBox:"0 0 24 24"};function hl(n,t){return e.openBlock(),e.createElementBlock("svg",_l,t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87q.11.06.22.127c.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a8 8 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a7 7 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a7 7 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a7 7 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124q.108-.066.22-.128c.332-.183.582-.495.644-.869z"},null,-1),e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0"},null,-1)]))}const gl={render:hl},kl={class:"vuefinder__modal-header"},wl={class:"vuefinder__modal-header__icon-container"},bl={class:"vuefinder__modal-header__title",id:"modal-title"},Oe={__name:"ModalHeader",props:{title:{type:String,required:!0},icon:{type:Object,required:!0}},setup(n){return(t,o)=>(e.openBlock(),e.createElementBlock("div",kl,[e.createElementVNode("div",wl,[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(n.icon),{class:"vuefinder__modal-header__icon"}))]),e.createElementVNode("h3",bl,e.toDisplayString(n.title),1)]))}},yl={class:"vuefinder__about-modal__content"},El={class:"vuefinder__about-modal__main"},Vl={class:"vuefinder__about-modal__tabs","aria-label":"Tabs"},Sl=["onClick","aria-current"],Nl={key:0,class:"vuefinder__about-modal__tab-content"},xl={class:"vuefinder__about-modal__description"},Bl={href:"https://vuefinder.ozdemir.be",class:"vuefinder__about-modal__link",target:"_blank"},Cl={href:"https://github.com/n1crack/vuefinder",class:"vuefinder__about-modal__link",target:"_blank"},$l={key:1,class:"vuefinder__about-modal__tab-content"},Dl={class:"vuefinder__about-modal__description"},Tl={class:"vuefinder__about-modal__settings"},Ml={class:"vuefinder__about-modal__setting flex"},Al={class:"vuefinder__about-modal__setting-input"},Ol={class:"vuefinder__about-modal__setting-label"},Ll={for:"metric_unit",class:"vuefinder__about-modal__label"},Fl={class:"vuefinder__about-modal__setting flex"},Rl={class:"vuefinder__about-modal__setting-input"},Hl={class:"vuefinder__about-modal__setting-label"},Il={for:"large_icons",class:"vuefinder__about-modal__label"},zl={class:"vuefinder__about-modal__setting flex"},Ul={class:"vuefinder__about-modal__setting-input"},jl={class:"vuefinder__about-modal__setting-label"},ql={for:"persist_path",class:"vuefinder__about-modal__label"},Pl={class:"vuefinder__about-modal__setting flex"},Gl={class:"vuefinder__about-modal__setting-input"},Wl={class:"vuefinder__about-modal__setting-label"},Kl={for:"show_thumbnails",class:"vuefinder__about-modal__label"},Yl={class:"vuefinder__about-modal__setting"},Jl={class:"vuefinder__about-modal__setting-input"},Xl={for:"theme",class:"vuefinder__about-modal__label"},Zl={class:"vuefinder__about-modal__setting-label"},Ql=["label"],ea=["value"],ta={key:0,class:"vuefinder__about-modal__setting"},na={class:"vuefinder__about-modal__setting-input"},oa={for:"language",class:"vuefinder__about-modal__label"},ra={class:"vuefinder__about-modal__setting-label"},sa=["label"],la=["value"],aa={key:2,class:"vuefinder__about-modal__tab-content"},ia={class:"vuefinder__about-modal__shortcuts"},ca={class:"vuefinder__about-modal__shortcut"},da={class:"vuefinder__about-modal__shortcut"},ua={class:"vuefinder__about-modal__shortcut"},ma={class:"vuefinder__about-modal__shortcut"},fa={class:"vuefinder__about-modal__shortcut"},va={class:"vuefinder__about-modal__shortcut"},pa={class:"vuefinder__about-modal__shortcut"},_a={class:"vuefinder__about-modal__shortcut"},ha={class:"vuefinder__about-modal__shortcut"},ga={key:3,class:"vuefinder__about-modal__tab-content"},ka={class:"vuefinder__about-modal__description"},or={__name:"ModalAbout",setup(n){const t=e.inject("ServiceContainer"),{setStore:o,clearStore:s}=t.storage,{t:r}=t.i18n,i={ABOUT:"about",SETTINGS:"settings",SHORTCUTS:"shortcuts",RESET:"reset"},l=e.computed(()=>[{name:r("About"),key:i.ABOUT},{name:r("Settings"),key:i.SETTINGS},{name:r("Shortcuts"),key:i.SHORTCUTS},{name:r("Reset"),key:i.RESET}]),c=e.ref("about"),a=async()=>{s(),location.reload()},d=M=>{t.theme.set(M),t.emitter.emit("vf-theme-saved")},m=()=>{t.metricUnits=!t.metricUnits,t.filesize=t.metricUnits?mo:uo,o("metricUnits",t.metricUnits),t.emitter.emit("vf-metric-units-saved")},u=()=>{t.compactListView=!t.compactListView,o("compactListView",t.compactListView),t.emitter.emit("vf-compact-view-saved")},v=()=>{t.showThumbnails=!t.showThumbnails,o("show-thumbnails",t.showThumbnails),t.emitter.emit("vf-show-thumbnails-saved")},f=()=>{t.persist=!t.persist,o("persist-path",t.persist),t.emitter.emit("vf-persist-path-saved")},{i18n:_}=e.inject("VueFinderOptions"),g=Object.fromEntries(Object.entries({ar:"Arabic (العربيّة)",en:"English",fr:"French (Français)",de:"German (Deutsch)",fa:"Persian (فارسی)",he:"Hebrew (עִברִית)",hi:"Hindi (हिंदी)",ru:"Russian (Pусский)",sv:"Swedish (Svenska)",tr:"Turkish (Türkçe)",zhCN:"Simplified Chinese (简体中文)",zhTW:"Traditional Chinese (繁體中文)"}).filter(([M])=>Object.keys(_).includes(M))),w=e.computed(()=>({system:r("System"),light:r("Light"),dark:r("Dark")}));return(M,h)=>(e.openBlock(),e.createBlock(Ce,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:h[7]||(h[7]=k=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(r)("Close")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",yl,[e.createVNode(Oe,{icon:e.unref(gl),title:"Vuefinder "+e.unref(t).version},null,8,["icon","title"]),e.createElementVNode("div",El,[e.createElementVNode("div",null,[e.createElementVNode("div",null,[e.createElementVNode("nav",Vl,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(l.value,k=>(e.openBlock(),e.createElementBlock("button",{key:k.name,onClick:x=>c.value=k.key,class:e.normalizeClass([k.key===c.value?"vuefinder__about-modal__tab--active":"vuefinder__about-modal__tab--inactive","vuefinder__about-modal__tab"]),"aria-current":k.current?"page":void 0},e.toDisplayString(k.name),11,Sl))),128))])])]),c.value===i.ABOUT?(e.openBlock(),e.createElementBlock("div",Nl,[e.createElementVNode("div",xl,e.toDisplayString(e.unref(r)("Vuefinder is a simple, lightweight, and fast file manager library for Vue.js applications")),1),e.createElementVNode("a",Bl,e.toDisplayString(e.unref(r)("Project home")),1),e.createElementVNode("a",Cl,e.toDisplayString(e.unref(r)("Follow on GitHub")),1)])):e.createCommentVNode("",!0),c.value===i.SETTINGS?(e.openBlock(),e.createElementBlock("div",$l,[e.createElementVNode("div",Dl,e.toDisplayString(e.unref(r)("Customize your experience with the following settings")),1),e.createElementVNode("div",Tl,[e.createElementVNode("fieldset",null,[e.createElementVNode("div",Ml,[e.createElementVNode("div",Al,[e.withDirectives(e.createElementVNode("input",{id:"metric_unit",name:"metric_unit",type:"checkbox","onUpdate:modelValue":h[0]||(h[0]=k=>e.unref(t).metricUnits=k),onClick:m,class:"vuefinder__about-modal__checkbox"},null,512),[[e.vModelCheckbox,e.unref(t).metricUnits]])]),e.createElementVNode("div",Ol,[e.createElementVNode("label",Ll,[e.createTextVNode(e.toDisplayString(e.unref(r)("Use Metric Units"))+" ",1),e.createVNode(We,{class:"ms-3",on:"vf-metric-units-saved"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(r)("Saved.")),1)]),_:1})])])]),e.createElementVNode("div",Fl,[e.createElementVNode("div",Rl,[e.withDirectives(e.createElementVNode("input",{id:"large_icons",name:"large_icons",type:"checkbox","onUpdate:modelValue":h[1]||(h[1]=k=>e.unref(t).compactListView=k),onClick:u,class:"vuefinder__about-modal__checkbox"},null,512),[[e.vModelCheckbox,e.unref(t).compactListView]])]),e.createElementVNode("div",Hl,[e.createElementVNode("label",Il,[e.createTextVNode(e.toDisplayString(e.unref(r)("Compact list view"))+" ",1),e.createVNode(We,{class:"ms-3",on:"vf-compact-view-saved"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(r)("Saved.")),1)]),_:1})])])]),e.createElementVNode("div",zl,[e.createElementVNode("div",Ul,[e.withDirectives(e.createElementVNode("input",{id:"persist_path",name:"persist_path",type:"checkbox","onUpdate:modelValue":h[2]||(h[2]=k=>e.unref(t).persist=k),onClick:f,class:"vuefinder__about-modal__checkbox"},null,512),[[e.vModelCheckbox,e.unref(t).persist]])]),e.createElementVNode("div",jl,[e.createElementVNode("label",ql,[e.createTextVNode(e.toDisplayString(e.unref(r)("Persist path on reload"))+" ",1),e.createVNode(We,{class:"ms-3",on:"vf-persist-path-saved"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(r)("Saved.")),1)]),_:1})])])]),e.createElementVNode("div",Pl,[e.createElementVNode("div",Gl,[e.withDirectives(e.createElementVNode("input",{id:"show_thumbnails",name:"show_thumbnails",type:"checkbox","onUpdate:modelValue":h[3]||(h[3]=k=>e.unref(t).showThumbnails=k),onClick:v,class:"vuefinder__about-modal__checkbox"},null,512),[[e.vModelCheckbox,e.unref(t).showThumbnails]])]),e.createElementVNode("div",Wl,[e.createElementVNode("label",Kl,[e.createTextVNode(e.toDisplayString(e.unref(r)("Show thumbnails"))+" ",1),e.createVNode(We,{class:"ms-3",on:"vf-show-thumbnails-saved"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(r)("Saved.")),1)]),_:1})])])]),e.createElementVNode("div",Yl,[e.createElementVNode("div",Jl,[e.createElementVNode("label",Xl,e.toDisplayString(e.unref(r)("Theme")),1)]),e.createElementVNode("div",Zl,[e.withDirectives(e.createElementVNode("select",{id:"theme","onUpdate:modelValue":h[4]||(h[4]=k=>e.unref(t).theme.value=k),onChange:h[5]||(h[5]=k=>d(k.target.value)),class:"vuefinder__about-modal__select"},[e.createElementVNode("optgroup",{label:e.unref(r)("Theme")},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(w.value,(k,x)=>(e.openBlock(),e.createElementBlock("option",{value:x},e.toDisplayString(k),9,ea))),256))],8,Ql)],544),[[e.vModelSelect,e.unref(t).theme.value]]),e.createVNode(We,{class:"ms-3",on:"vf-theme-saved"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(r)("Saved.")),1)]),_:1})])]),e.unref(t).features.includes(e.unref(Z).LANGUAGE)&&Object.keys(e.unref(g)).length>1?(e.openBlock(),e.createElementBlock("div",ta,[e.createElementVNode("div",na,[e.createElementVNode("label",oa,e.toDisplayString(e.unref(r)("Language")),1)]),e.createElementVNode("div",ra,[e.withDirectives(e.createElementVNode("select",{id:"language","onUpdate:modelValue":h[6]||(h[6]=k=>e.unref(t).i18n.locale=k),class:"vuefinder__about-modal__select"},[e.createElementVNode("optgroup",{label:e.unref(r)("Language")},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(g),(k,x)=>(e.openBlock(),e.createElementBlock("option",{value:x},e.toDisplayString(k),9,la))),256))],8,sa)],512),[[e.vModelSelect,e.unref(t).i18n.locale]]),e.createVNode(We,{class:"ms-3",on:"vf-language-saved"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(r)("Saved.")),1)]),_:1})])])):e.createCommentVNode("",!0)])])])):e.createCommentVNode("",!0),c.value===i.SHORTCUTS?(e.openBlock(),e.createElementBlock("div",aa,[e.createElementVNode("div",ia,[e.createElementVNode("div",ca,[e.createElementVNode("div",null,e.toDisplayString(e.unref(r)("Rename")),1),h[8]||(h[8]=e.createElementVNode("kbd",null,"F2",-1))]),e.createElementVNode("div",da,[e.createElementVNode("div",null,e.toDisplayString(e.unref(r)("Refresh")),1),h[9]||(h[9]=e.createElementVNode("kbd",null,"F5",-1))]),e.createElementVNode("div",ua,[e.createTextVNode(e.toDisplayString(e.unref(r)("Delete"))+" ",1),h[10]||(h[10]=e.createElementVNode("kbd",null,"Del",-1))]),e.createElementVNode("div",ma,[e.createTextVNode(e.toDisplayString(e.unref(r)("Escape"))+" ",1),h[11]||(h[11]=e.createElementVNode("div",null,[e.createElementVNode("kbd",null,"Esc")],-1))]),e.createElementVNode("div",fa,[e.createTextVNode(e.toDisplayString(e.unref(r)("Select All"))+" ",1),h[12]||(h[12]=e.createElementVNode("div",null,[e.createElementVNode("kbd",null,"Ctrl"),e.createTextVNode(" + "),e.createElementVNode("kbd",null,"A")],-1))]),e.createElementVNode("div",va,[e.createTextVNode(e.toDisplayString(e.unref(r)("Search"))+" ",1),h[13]||(h[13]=e.createElementVNode("div",null,[e.createElementVNode("kbd",null,"Ctrl"),e.createTextVNode(" + "),e.createElementVNode("kbd",null,"F")],-1))]),e.createElementVNode("div",pa,[e.createTextVNode(e.toDisplayString(e.unref(r)("Toggle Sidebar"))+" ",1),h[14]||(h[14]=e.createElementVNode("div",null,[e.createElementVNode("kbd",null,"Ctrl"),e.createTextVNode(" + "),e.createElementVNode("kbd",null,"E")],-1))]),e.createElementVNode("div",_a,[e.createTextVNode(e.toDisplayString(e.unref(r)("Open Settings"))+" ",1),h[15]||(h[15]=e.createElementVNode("div",null,[e.createElementVNode("kbd",null,"Ctrl"),e.createTextVNode(" + "),e.createElementVNode("kbd",null,",")],-1))]),e.createElementVNode("div",ha,[e.createTextVNode(e.toDisplayString(e.unref(r)("Toggle Full Screen"))+" ",1),h[16]||(h[16]=e.createElementVNode("div",null,[e.createElementVNode("kbd",null,"Ctrl"),e.createTextVNode(" + "),e.createElementVNode("kbd",null,"Enter")],-1))])])])):e.createCommentVNode("",!0),c.value===i.RESET?(e.openBlock(),e.createElementBlock("div",ga,[e.createElementVNode("div",ka,e.toDisplayString(e.unref(r)("Reset all settings to default")),1),e.createElementVNode("button",{onClick:a,type:"button",class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(r)("Reset Settings")),1)])):e.createCommentVNode("",!0)])])]),_:1}))}},wa=["title"],$e={__name:"Message",props:{error:{type:Boolean,default:!1}},emits:["hidden"],setup(n,{emit:t}){var d;const o=t,s=e.inject("ServiceContainer"),{t:r}=s.i18n,i=e.ref(!1),l=e.ref(null),c=e.ref((d=l.value)==null?void 0:d.strMessage);e.watch(c,()=>i.value=!1);const a=()=>{o("hidden"),i.value=!0};return(m,u)=>(e.openBlock(),e.createElementBlock("div",null,[i.value?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",{key:0,ref_key:"strMessage",ref:l,class:e.normalizeClass(["vuefinder__message",n.error?"vuefinder__message--error":"vuefinder__message--success"])},[e.renderSlot(m.$slots,"default"),e.createElementVNode("div",{class:"vuefinder__message__close",onClick:a,title:e.unref(r)("Close")},u[0]||(u[0]=[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"vuefinder__message__icon"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,wa)],2))]))}},ba={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto",viewBox:"0 0 24 24"};function ya(n,t){return e.openBlock(),e.createElementBlock("svg",ba,t[0]||(t[0]=[e.createElementVNode("path",{d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21q.512.078 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48 48 0 0 0-3.478-.397m-12 .562q.51-.089 1.022-.165m0 0a48 48 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a52 52 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a49 49 0 0 0-7.5 0"},null,-1)]))}const rr={render:ya},Ea={class:"vuefinder__delete-modal__content"},Va={class:"vuefinder__delete-modal__form"},Sa={class:"vuefinder__delete-modal__description"},Na={class:"vuefinder__delete-modal__files vf-scrollbar"},xa={class:"vuefinder__delete-modal__file"},Ba={key:0,class:"vuefinder__delete-modal__icon vuefinder__delete-modal__icon--dir",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Ca={key:1,class:"vuefinder__delete-modal__icon",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},$a={class:"vuefinder__delete-modal__file-name"},Da={class:"vuefinder__delete-modal__warning"},Mn={__name:"ModalDelete",setup(n){const t=e.inject("ServiceContainer"),{t:o}=t.i18n,s=e.ref(t.modal.data.items),r=e.ref(""),i=()=>{s.value.length&&t.emitter.emit("vf-fetch",{params:{q:"delete",m:"post",adapter:t.fs.adapter,path:t.fs.data.dirname},body:{items:s.value.map(({path:l,type:c})=>({path:l,type:c}))},onSuccess:()=>{t.emitter.emit("vf-toast-push",{label:o("Files deleted.")})},onError:l=>{r.value=o(l.message)}})};return(l,c)=>(e.openBlock(),e.createBlock(Ce,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:i,class:"vf-btn vf-btn-danger"},e.toDisplayString(e.unref(o)("Yes, Delete!")),1),e.createElementVNode("button",{type:"button",onClick:c[1]||(c[1]=a=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(o)("Cancel")),1),e.createElementVNode("div",Da,e.toDisplayString(e.unref(o)("This action cannot be undone.")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",null,[e.createVNode(Oe,{icon:e.unref(rr),title:e.unref(o)("Delete files")},null,8,["icon","title"]),e.createElementVNode("div",Ea,[e.createElementVNode("div",Va,[e.createElementVNode("p",Sa,e.toDisplayString(e.unref(o)("Are you sure you want to delete these files?")),1),e.createElementVNode("div",Na,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(s.value,a=>(e.openBlock(),e.createElementBlock("p",xa,[a.type==="dir"?(e.openBlock(),e.createElementBlock("svg",Ba,c[2]||(c[2]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)]))):(e.openBlock(),e.createElementBlock("svg",Ca,c[3]||(c[3]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)]))),e.createElementVNode("span",$a,e.toDisplayString(a.basename),1)]))),256))]),r.value.length?(e.openBlock(),e.createBlock($e,{key:0,onHidden:c[0]||(c[0]=a=>r.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(r.value),1)]),_:1})):e.createCommentVNode("",!0)])])])]),_:1}))}},Ta={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto",viewBox:"0 0 24 24"};function Ma(n,t){return e.openBlock(),e.createElementBlock("svg",Ta,t[0]||(t[0]=[e.createElementVNode("path",{d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"},null,-1)]))}const sr={render:Ma},Aa={class:"vuefinder__rename-modal__content"},Oa={class:"vuefinder__rename-modal__item"},La={class:"vuefinder__rename-modal__item-info"},Fa={key:0,class:"vuefinder__rename-modal__icon vuefinder__rename-modal__icon--dir",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Ra={key:1,class:"vuefinder__rename-modal__icon",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Ha={class:"vuefinder__rename-modal__item-name"},An={__name:"ModalRename",setup(n){const t=e.inject("ServiceContainer"),{t:o}=t.i18n,s=e.ref(t.modal.data.items[0]),r=e.ref(t.modal.data.items[0].basename),i=e.ref(""),l=()=>{r.value!=""&&t.emitter.emit("vf-fetch",{params:{q:"rename",m:"post",adapter:t.fs.adapter,path:t.fs.data.dirname},body:{item:s.value.path,name:r.value},onSuccess:()=>{t.emitter.emit("vf-toast-push",{label:o("%s is renamed.",r.value)})},onError:c=>{i.value=o(c.message)}})};return(c,a)=>(e.openBlock(),e.createBlock(Ce,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:l,class:"vf-btn vf-btn-primary"},e.toDisplayString(e.unref(o)("Rename")),1),e.createElementVNode("button",{type:"button",onClick:a[2]||(a[2]=d=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(o)("Cancel")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",null,[e.createVNode(Oe,{icon:e.unref(sr),title:e.unref(o)("Rename")},null,8,["icon","title"]),e.createElementVNode("div",Aa,[e.createElementVNode("div",Oa,[e.createElementVNode("p",La,[s.value.type==="dir"?(e.openBlock(),e.createElementBlock("svg",Fa,a[3]||(a[3]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)]))):(e.openBlock(),e.createElementBlock("svg",Ra,a[4]||(a[4]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)]))),e.createElementVNode("span",Ha,e.toDisplayString(s.value.basename),1)]),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":a[0]||(a[0]=d=>r.value=d),onKeyup:e.withKeys(l,["enter"]),class:"vuefinder__rename-modal__input",placeholder:"Name",type:"text"},null,544),[[e.vModelText,r.value]]),i.value.length?(e.openBlock(),e.createBlock($e,{key:0,onHidden:a[1]||(a[1]=d=>i.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(i.value),1)]),_:1})):e.createCommentVNode("",!0)])])])]),_:1}))}},De={ESCAPE:"Escape",F2:"F2",F5:"F5",DELETE:"Delete",ENTER:"Enter",BACKSLASH:"Backslash",KEY_A:"KeyA",KEY_E:"KeyE",KEY_F:"KeyF"};function Ia(n){const t=o=>{o.code===De.ESCAPE&&(n.modal.close(),n.root.focus()),!n.modal.visible&&(n.fs.searchMode||(o.code===De.F2&&n.features.includes(Z.RENAME)&&(n.dragSelect.getCount()!==1||n.modal.open(An,{items:n.dragSelect.getSelected()})),o.code===De.F5&&n.emitter.emit("vf-fetch",{params:{q:"index",adapter:n.fs.adapter,path:n.fs.data.dirname}}),o.code===De.DELETE&&(!n.dragSelect.getCount()||n.modal.open(Mn,{items:n.dragSelect.getSelected()})),o.metaKey&&o.code===De.BACKSLASH&&n.modal.open(or),o.metaKey&&o.code===De.KEY_F&&n.features.includes(Z.SEARCH)&&(n.fs.searchMode=!0,o.preventDefault()),o.metaKey&&o.code===De.KEY_E&&(n.showTreeView=!n.showTreeView,n.storage.setStore("show-tree-view",n.showTreeView)),o.metaKey&&o.code===De.ENTER&&(n.fullScreen=!n.fullScreen,n.root.focus()),o.metaKey&&o.code===De.KEY_A&&(n.dragSelect.selectAll(),o.preventDefault())))};e.onMounted(()=>{n.root.addEventListener("keydown",t)})}const za={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto vf-toolbar-icon",viewBox:"0 0 24 24"};function Ua(n,t){return e.openBlock(),e.createElementBlock("svg",za,t[0]||(t[0]=[e.createElementVNode("path",{d:"M12 10.5v6m3-3H9m4.06-7.19-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44z"},null,-1)]))}const lr={render:Ua},ja={class:"vuefinder__new-folder-modal__content"},qa={class:"vuefinder__new-folder-modal__form"},Pa={class:"vuefinder__new-folder-modal__description"},Ga=["placeholder"],ar={__name:"ModalNewFolder",setup(n){const t=e.inject("ServiceContainer");t.storage;const{t:o}=t.i18n,s=e.ref(""),r=e.ref(""),i=()=>{s.value!==""&&t.emitter.emit("vf-fetch",{params:{q:"newfolder",m:"post",adapter:t.fs.adapter,path:t.fs.data.dirname},body:{name:s.value},onSuccess:()=>{t.emitter.emit("vf-toast-push",{label:o("%s is created.",s.value)})},onError:l=>{r.value=o(l.message)}})};return(l,c)=>(e.openBlock(),e.createBlock(Ce,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:i,class:"vf-btn vf-btn-primary"},e.toDisplayString(e.unref(o)("Create")),1),e.createElementVNode("button",{type:"button",onClick:c[2]||(c[2]=a=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(o)("Cancel")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",null,[e.createVNode(Oe,{icon:e.unref(lr),title:e.unref(o)("New Folder")},null,8,["icon","title"]),e.createElementVNode("div",ja,[e.createElementVNode("div",qa,[e.createElementVNode("p",Pa,e.toDisplayString(e.unref(o)("Create a new folder")),1),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":c[0]||(c[0]=a=>s.value=a),onKeyup:e.withKeys(i,["enter"]),class:"vuefinder__new-folder-modal__input",placeholder:e.unref(o)("Folder Name"),type:"text"},null,40,Ga),[[e.vModelText,s.value]]),r.value.length?(e.openBlock(),e.createBlock($e,{key:0,onHidden:c[1]||(c[1]=a=>r.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(r.value),1)]),_:1})):e.createCommentVNode("",!0)])])])]),_:1}))}},Wa={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto vf-toolbar-icon",viewBox:"0 0 24 24"};function Ka(n,t){return e.openBlock(),e.createElementBlock("svg",Wa,t[0]||(t[0]=[e.createElementVNode("path",{d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m3.75 9v6m3-3H9m1.5-12H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9"},null,-1)]))}const ir={render:Ka},Ya={class:"vuefinder__new-file-modal__content"},Ja={class:"vuefinder__new-file-modal__form"},Xa={class:"vuefinder__new-file-modal__description"},Za=["placeholder"],Qa={__name:"ModalNewFile",setup(n){const t=e.inject("ServiceContainer");t.storage;const{t:o}=t.i18n,s=e.ref(""),r=e.ref(""),i=()=>{s.value!==""&&t.emitter.emit("vf-fetch",{params:{q:"newfile",m:"post",adapter:t.fs.adapter,path:t.fs.data.dirname},body:{name:s.value},onSuccess:()=>{t.emitter.emit("vf-toast-push",{label:o("%s is created.",s.value)})},onError:l=>{r.value=o(l.message)}})};return(l,c)=>(e.openBlock(),e.createBlock(Ce,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:i,class:"vf-btn vf-btn-primary"},e.toDisplayString(e.unref(o)("Create")),1),e.createElementVNode("button",{type:"button",onClick:c[2]||(c[2]=a=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(o)("Cancel")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",null,[e.createVNode(Oe,{icon:e.unref(ir),title:e.unref(o)("New File")},null,8,["icon","title"]),e.createElementVNode("div",Ya,[e.createElementVNode("div",Ja,[e.createElementVNode("p",Xa,e.toDisplayString(e.unref(o)("Create a new file")),1),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":c[0]||(c[0]=a=>s.value=a),onKeyup:e.withKeys(i,["enter"]),class:"vuefinder__new-file-modal__input",placeholder:e.unref(o)("File Name"),type:"text"},null,40,Za),[[e.vModelText,s.value]]),r.value.length?(e.openBlock(),e.createBlock($e,{key:0,onHidden:c[1]||(c[1]=a=>r.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(r.value),1)]),_:1})):e.createCommentVNode("",!0)])])])]),_:1}))}};function hn(n,t=14){let o=`((?=([\\w\\W]{0,${t}}))([\\w\\W]{${t+1},})([\\w\\W]{8,}))`;return n.replace(new RegExp(o),"$2..$4")}const ei={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto vf-toolbar-icon",viewBox:"0 0 24 24"};function ti(n,t){return e.openBlock(),e.createElementBlock("svg",ei,t[0]||(t[0]=[e.createElementVNode("path",{d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5"},null,-1)]))}const cr={render:ti},ni={class:"vuefinder__upload-modal__content"},oi={key:0,class:"pointer-events-none"},ri={key:1,class:"pointer-events-none"},si=["disabled"],li=["disabled"],ai={class:"vuefinder__upload-modal__file-list vf-scrollbar"},ii=["textContent"],ci={class:"vuefinder__upload-modal__file-info"},di={class:"vuefinder__upload-modal__file-name hidden md:block"},ui={class:"vuefinder__upload-modal__file-name md:hidden"},mi={key:0,class:"ml-auto"},fi=["title","disabled","onClick"],vi={key:0,class:"py-2"},pi=["disabled"],_i={__name:"ModalUpload",setup(n){const t=e.inject("ServiceContainer"),{t:o}=t.i18n,s=o("uppy"),r={PENDING:0,CANCELED:1,UPLOADING:2,ERROR:3,DONE:10},i=e.ref({QUEUE_ENTRY_STATUS:r}),l=e.ref(null),c=e.ref(null),a=e.ref(null),d=e.ref(null),m=e.ref(null),u=e.ref(null),v=e.ref([]),f=e.ref(""),_=e.ref(!1),p=e.ref(!1);let g;function w(S){return v.value.findIndex(D=>D.id===S)}function M(S,D=null){D=D??(S.webkitRelativePath||S.name),g.addFile({name:D,type:S.type,data:S,source:"Local"})}function h(S){switch(S.status){case r.DONE:return"text-green-600";case r.ERROR:return"text-red-600";case r.CANCELED:return"text-red-600";case r.PENDING:default:return""}}const k=S=>{switch(S.status){case r.DONE:return"✓";case r.ERROR:case r.CANCELED:return"!";case r.PENDING:default:return"..."}};function x(){d.value.click()}function C(){if(!_.value){if(!v.value.filter(S=>S.status!==r.DONE).length){f.value=o("Please select file to upload first.");return}f.value="",g.retryAll(),g.upload()}}function H(){g.cancelAll({reason:"user"}),v.value.forEach(S=>{S.status!==r.DONE&&(S.status=r.CANCELED,S.statusName=o("Canceled"))}),_.value=!1}function B(S){_.value||(g.removeFile(S.id,"removed-by-user"),v.value.splice(w(S.id),1))}function y(S){if(!_.value){if(g.cancelAll({reason:"user"}),S){const D=[];v.value.forEach(E=>{E.status!==r.DONE&&D.push(E)}),v.value=[],D.forEach(E=>{M(E.originalFile,E.name)});return}v.value.splice(0)}}function b(){t.modal.close()}function V(){return t.requester.transformRequestParams({url:"",method:"post",params:{q:"upload",adapter:t.fs.adapter,path:t.fs.data.dirname}})}return e.onMounted(async()=>{g=new Tr({debug:t.debug,restrictions:{maxFileSize:jr(t.maxFileSize)},locale:s,onBeforeFileAdded(E,O){if(O[E.id]!=null){const q=w(E.id);v.value[q].status===r.PENDING&&(f.value=g.i18n("noDuplicates",{fileName:E.name})),v.value=v.value.filter(W=>W.id!==E.id)}return v.value.push({id:E.id,name:E.name,size:t.filesize(E.size),status:r.PENDING,statusName:o("Pending upload"),percent:null,originalFile:E.data}),!0}}),g.use(Mr,{endpoint:"WILL_BE_REPLACED_BEFORE_UPLOAD",limit:5,timeout:0,getResponseError(E,O){let L;try{L=JSON.parse(E).message}catch{L=o("Cannot parse server response.")}return new Error(L)}}),g.on("restriction-failed",(E,O)=>{const L=v.value[w(E.id)];B(L),f.value=O.message}),g.on("upload",()=>{const E=V();g.setMeta({...E.body});const O=g.getPlugin("XHRUpload");O.opts.method=E.method,O.opts.endpoint=E.url+"?"+new URLSearchParams(E.params),O.opts.headers=E.headers,delete E.headers["Content-Type"],_.value=!0,v.value.forEach(L=>{L.status!==r.DONE&&(L.percent=null,L.status=r.UPLOADING,L.statusName=o("Pending upload"))})}),g.on("upload-progress",(E,O)=>{const L=Math.floor(O.bytesUploaded/O.bytesTotal*100);v.value[w(E.id)].percent=`${L}%`}),g.on("upload-success",E=>{const O=v.value[w(E.id)];O.status=r.DONE,O.statusName=o("Done")}),g.on("upload-error",(E,O)=>{const L=v.value[w(E.id)];L.percent=null,L.status=r.ERROR,O.isNetworkError?L.statusName=o("Network Error, Unable establish connection to the server or interrupted."):L.statusName=O?O.message:o("Unknown Error")}),g.on("error",E=>{f.value=E.message,_.value=!1,t.emitter.emit("vf-fetch",{params:{q:"index",adapter:t.fs.adapter,path:t.fs.data.dirname},noCloseModal:!0})}),g.on("complete",()=>{_.value=!1,t.emitter.emit("vf-fetch",{params:{q:"index",adapter:t.fs.adapter,path:t.fs.data.dirname},noCloseModal:!0})}),d.value.addEventListener("click",()=>{c.value.click()}),m.value.addEventListener("click",()=>{a.value.click()}),u.value.addEventListener("dragover",E=>{E.preventDefault(),p.value=!0}),u.value.addEventListener("dragleave",E=>{E.preventDefault(),p.value=!1});function S(E,O){O.isFile&&O.file(L=>E(O,L)),O.isDirectory&&O.createReader().readEntries(L=>{L.forEach(q=>{S(E,q)})})}u.value.addEventListener("drop",E=>{E.preventDefault(),p.value=!1;const O=/^[/\\](.+)/;[...E.dataTransfer.items].forEach(L=>{L.kind==="file"&&S((q,W)=>{const G=O.exec(q.fullPath);M(W,G[1])},L.webkitGetAsEntry())})});const D=({target:E})=>{const O=E.files;for(const L of O)M(L);E.value=""};c.value.addEventListener("change",D),a.value.addEventListener("change",D)}),e.onBeforeUnmount(()=>{g==null||g.close({reason:"unmount"})}),(S,D)=>(e.openBlock(),e.createBlock(Ce,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",class:"vf-btn vf-btn-primary",disabled:_.value,onClick:e.withModifiers(C,["prevent"])},e.toDisplayString(e.unref(o)("Upload")),9,pi),_.value?(e.openBlock(),e.createElementBlock("button",{key:0,type:"button",class:"vf-btn vf-btn-secondary",onClick:e.withModifiers(H,["prevent"])},e.toDisplayString(e.unref(o)("Cancel")),1)):(e.openBlock(),e.createElementBlock("button",{key:1,type:"button",class:"vf-btn vf-btn-secondary",onClick:e.withModifiers(b,["prevent"])},e.toDisplayString(e.unref(o)("Close")),1))]),default:e.withCtx(()=>[e.createElementVNode("div",null,[e.createVNode(Oe,{icon:e.unref(cr),title:e.unref(o)("Upload Files")},null,8,["icon","title"]),e.createElementVNode("div",ni,[e.createElementVNode("div",{class:"vuefinder__upload-modal__drop-area",ref_key:"dropArea",ref:u,onClick:x},[p.value?(e.openBlock(),e.createElementBlock("div",oi,e.toDisplayString(e.unref(o)("Release to drop these files.")),1)):(e.openBlock(),e.createElementBlock("div",ri,e.toDisplayString(e.unref(o)("Drag and drop the files/folders to here or click here.")),1))],512),e.createElementVNode("div",{ref_key:"container",ref:l,class:"vuefinder__upload-modal__buttons"},[e.createElementVNode("button",{ref_key:"pickFiles",ref:d,type:"button",class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(o)("Select Files")),513),e.createElementVNode("button",{ref_key:"pickFolders",ref:m,type:"button",class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(o)("Select Folders")),513),e.createElementVNode("button",{type:"button",class:"vf-btn vf-btn-secondary",disabled:_.value,onClick:D[0]||(D[0]=E=>y(!1))},e.toDisplayString(e.unref(o)("Clear all")),9,si),e.createElementVNode("button",{type:"button",class:"vf-btn vf-btn-secondary",disabled:_.value,onClick:D[1]||(D[1]=E=>y(!0))},e.toDisplayString(e.unref(o)("Clear only successful")),9,li)],512),e.createElementVNode("div",ai,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(v.value,E=>(e.openBlock(),e.createElementBlock("div",{class:"vuefinder__upload-modal__file-entry",key:E.id},[e.createElementVNode("span",{class:e.normalizeClass(["vuefinder__upload-modal__file-icon",h(E)])},[e.createElementVNode("span",{class:"vuefinder__upload-modal__file-icon-text",textContent:e.toDisplayString(k(E))},null,8,ii)],2),e.createElementVNode("div",ci,[e.createElementVNode("div",di,e.toDisplayString(e.unref(hn)(E.name,40))+" ("+e.toDisplayString(E.size)+")",1),e.createElementVNode("div",ui,e.toDisplayString(e.unref(hn)(E.name,16))+" ("+e.toDisplayString(E.size)+")",1),e.createElementVNode("div",{class:e.normalizeClass(["vuefinder__upload-modal__file-status",h(E)])},[e.createTextVNode(e.toDisplayString(E.statusName)+" ",1),E.status===i.value.QUEUE_ENTRY_STATUS.UPLOADING?(e.openBlock(),e.createElementBlock("b",mi,e.toDisplayString(E.percent),1)):e.createCommentVNode("",!0)],2)]),e.createElementVNode("button",{type:"button",class:e.normalizeClass(["vuefinder__upload-modal__file-remove",_.value?"disabled":""]),title:e.unref(o)("Delete"),disabled:_.value,onClick:O=>B(E)},D[3]||(D[3]=[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"vuefinder__upload-modal__file-remove-icon"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)]),10,fi)]))),128)),v.value.length?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",vi,e.toDisplayString(e.unref(o)("No files selected!")),1))]),f.value.length?(e.openBlock(),e.createBlock($e,{key:0,onHidden:D[2]||(D[2]=E=>f.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(f.value),1)]),_:1})):e.createCommentVNode("",!0)])]),e.createElementVNode("input",{ref_key:"internalFileInput",ref:c,type:"file",multiple:"",class:"hidden"},null,512),e.createElementVNode("input",{ref_key:"internalFolderInput",ref:a,type:"file",multiple:"",webkitdirectory:"",class:"hidden"},null,512)]),_:1}))}},hi={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto",viewBox:"0 0 24 24"};function gi(n,t){return e.openBlock(),e.createElementBlock("svg",hi,t[0]||(t[0]=[e.createElementVNode("path",{d:"m20.25 7.5-.625 10.632a2.25 2.25 0 0 1-2.247 2.118H6.622a2.25 2.25 0 0 1-2.247-2.118L3.75 7.5m6 4.125 2.25 2.25m0 0 2.25 2.25M12 13.875l2.25-2.25M12 13.875l-2.25 2.25M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125"},null,-1)]))}const dr={render:gi},ki={class:"vuefinder__unarchive-modal__content"},wi={class:"vuefinder__unarchive-modal__items"},bi={class:"vuefinder__unarchive-modal__item"},yi={key:0,class:"vuefinder__unarchive-modal__icon vuefinder__unarchive-modal__icon--dir",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Ei={key:1,class:"vuefinder__unarchive-modal__icon vuefinder__unarchive-modal__icon--file",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Vi={class:"vuefinder__unarchive-modal__item-name"},Si={class:"vuefinder__unarchive-modal__info"},ur={__name:"ModalUnarchive",setup(n){const t=e.inject("ServiceContainer"),{t:o}=t.i18n,s=e.ref(t.modal.data.items[0]),r=e.ref(""),i=e.ref([]),l=()=>{t.emitter.emit("vf-fetch",{params:{q:"unarchive",m:"post",adapter:t.fs.adapter,path:t.fs.data.dirname},body:{item:s.value.path},onSuccess:()=>{t.emitter.emit("vf-toast-push",{label:o("The file unarchived.")})},onError:c=>{r.value=o(c.message)}})};return(c,a)=>(e.openBlock(),e.createBlock(Ce,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:l,class:"vf-btn vf-btn-primary"},e.toDisplayString(e.unref(o)("Unarchive")),1),e.createElementVNode("button",{type:"button",onClick:a[1]||(a[1]=d=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(o)("Cancel")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",null,[e.createVNode(Oe,{icon:e.unref(dr),title:e.unref(o)("Unarchive")},null,8,["icon","title"]),e.createElementVNode("div",ki,[e.createElementVNode("div",wi,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(i.value,d=>(e.openBlock(),e.createElementBlock("p",bi,[d.type==="dir"?(e.openBlock(),e.createElementBlock("svg",yi,a[2]||(a[2]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)]))):(e.openBlock(),e.createElementBlock("svg",Ei,a[3]||(a[3]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)]))),e.createElementVNode("span",Vi,e.toDisplayString(d.basename),1)]))),256)),e.createElementVNode("p",Si,e.toDisplayString(e.unref(o)("The archive will be unarchived at"))+" ("+e.toDisplayString(e.unref(t).fs.data.dirname)+")",1),r.value.length?(e.openBlock(),e.createBlock($e,{key:0,onHidden:a[0]||(a[0]=d=>r.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(r.value),1)]),_:1})):e.createCommentVNode("",!0)])])])]),_:1}))}},Ni={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto",viewBox:"0 0 24 24"};function xi(n,t){return e.openBlock(),e.createElementBlock("svg",Ni,t[0]||(t[0]=[e.createElementVNode("path",{d:"m20.25 7.5-.625 10.632a2.25 2.25 0 0 1-2.247 2.118H6.622a2.25 2.25 0 0 1-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125"},null,-1)]))}const mr={render:xi},Bi={class:"vuefinder__archive-modal__content"},Ci={class:"vuefinder__archive-modal__form"},$i={class:"vuefinder__archive-modal__files vf-scrollbar"},Di={class:"vuefinder__archive-modal__file"},Ti={key:0,class:"vuefinder__archive-modal__icon vuefinder__archive-modal__icon--dir",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Mi={key:1,class:"vuefinder__archive-modal__icon",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Ai={class:"vuefinder__archive-modal__file-name"},Oi=["placeholder"],fr={__name:"ModalArchive",setup(n){const t=e.inject("ServiceContainer"),{t:o}=t.i18n,s=e.ref(""),r=e.ref(""),i=e.ref(t.modal.data.items),l=()=>{i.value.length&&t.emitter.emit("vf-fetch",{params:{q:"archive",m:"post",adapter:t.fs.adapter,path:t.fs.data.dirname},body:{items:i.value.map(({path:c,type:a})=>({path:c,type:a})),name:s.value},onSuccess:()=>{t.emitter.emit("vf-toast-push",{label:o("The file(s) archived.")})},onError:c=>{r.value=o(c.message)}})};return(c,a)=>(e.openBlock(),e.createBlock(Ce,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:l,class:"vf-btn vf-btn-primary"},e.toDisplayString(e.unref(o)("Archive")),1),e.createElementVNode("button",{type:"button",onClick:a[2]||(a[2]=d=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(o)("Cancel")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",null,[e.createVNode(Oe,{icon:e.unref(mr),title:e.unref(o)("Archive the files")},null,8,["icon","title"]),e.createElementVNode("div",Bi,[e.createElementVNode("div",Ci,[e.createElementVNode("div",$i,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(i.value,d=>(e.openBlock(),e.createElementBlock("p",Di,[d.type==="dir"?(e.openBlock(),e.createElementBlock("svg",Ti,a[3]||(a[3]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)]))):(e.openBlock(),e.createElementBlock("svg",Mi,a[4]||(a[4]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)]))),e.createElementVNode("span",Ai,e.toDisplayString(d.basename),1)]))),256))]),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":a[0]||(a[0]=d=>s.value=d),onKeyup:e.withKeys(l,["enter"]),class:"vuefinder__archive-modal__input",placeholder:e.unref(o)("Archive name. (.zip file will be created)"),type:"text"},null,40,Oi),[[e.vModelText,s.value]]),r.value.length?(e.openBlock(),e.createBlock($e,{key:0,onHidden:a[1]||(a[1]=d=>r.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(r.value),1)]),_:1})):e.createCommentVNode("",!0)])])])]),_:1}))}},Li={xmlns:"http://www.w3.org/2000/svg",fill:"none",class:"animate-spin p-0.5 h-5 w-5 text-white ml-auto",viewBox:"0 0 24 24"};function Fi(n,t){return e.openBlock(),e.createElementBlock("svg",Li,t[0]||(t[0]=[e.createElementVNode("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4",class:"opacity-25 stroke-blue-900 dark:stroke-blue-100"},null,-1),e.createElementVNode("path",{fill:"currentColor",d:"M4 12a8 8 0 0 1 8-8V0C5.373 0 0 5.373 0 12zm2 5.291A7.96 7.96 0 0 1 4 12H0c0 3.042 1.135 5.824 3 7.938z",class:"opacity-75"},null,-1)]))}const On={render:Fi},Ri={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto vf-toolbar-icon",viewBox:"0 0 24 24"};function Hi(n,t){return e.openBlock(),e.createElementBlock("svg",Ri,t[0]||(t[0]=[e.createElementVNode("path",{d:"M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M3.75 20.25v-4.5m0 4.5h4.5m-4.5 0L9 15M20.25 3.75h-4.5m4.5 0v4.5m0-4.5L15 9m5.25 11.25h-4.5m4.5 0v-4.5m0 4.5L15 15"},null,-1)]))}const Ii={render:Hi},zi={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto vf-toolbar-icon",viewBox:"0 0 24 24"};function Ui(n,t){return e.openBlock(),e.createElementBlock("svg",zi,t[0]||(t[0]=[e.createElementVNode("path",{d:"M9 9V4.5M9 9H4.5M9 9 3.75 3.75M9 15v4.5M9 15H4.5M9 15l-5.25 5.25M15 9h4.5M15 9V4.5M15 9l5.25-5.25M15 15h4.5M15 15v4.5m0-4.5 5.25 5.25"},null,-1)]))}const ji={render:Ui},qi={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto",viewBox:"0 0 24 24"};function Pi(n,t){return e.openBlock(),e.createElementBlock("svg",qi,t[0]||(t[0]=[e.createElementVNode("path",{d:"M3.75 6A2.25 2.25 0 0 1 6 3.75h2.25A2.25 2.25 0 0 1 10.5 6v2.25a2.25 2.25 0 0 1-2.25 2.25H6a2.25 2.25 0 0 1-2.25-2.25zm0 9.75A2.25 2.25 0 0 1 6 13.5h2.25a2.25 2.25 0 0 1 2.25 2.25V18a2.25 2.25 0 0 1-2.25 2.25H6A2.25 2.25 0 0 1 3.75 18zM13.5 6a2.25 2.25 0 0 1 2.25-2.25H18A2.25 2.25 0 0 1 20.25 6v2.25A2.25 2.25 0 0 1 18 10.5h-2.25a2.25 2.25 0 0 1-2.25-2.25zm0 9.75a2.25 2.25 0 0 1 2.25-2.25H18a2.25 2.25 0 0 1 2.25 2.25V18A2.25 2.25 0 0 1 18 20.25h-2.25A2.25 2.25 0 0 1 13.5 18z"},null,-1)]))}const Gi={render:Pi},Wi={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto",viewBox:"0 0 24 24"};function Ki(n,t){return e.openBlock(),e.createElementBlock("svg",Wi,t[0]||(t[0]=[e.createElementVNode("path",{d:"M3.75 12h16.5m-16.5 3.75h16.5M3.75 19.5h16.5M5.625 4.5h12.75a1.875 1.875 0 0 1 0 3.75H5.625a1.875 1.875 0 0 1 0-3.75"},null,-1)]))}const Yi={render:Ki},Ji={class:"vuefinder__toolbar"},Xi={key:0,class:"vuefinder__toolbar__actions"},Zi=["title"],Qi=["title"],ec=["title"],tc=["title"],nc=["title"],oc=["title"],rc=["title"],sc={key:1,class:"vuefinder__toolbar__search-results"},lc={class:"pl-2"},ac={class:"dark:bg-gray-700 bg-gray-200 text-xs px-2 py-1 rounded"},ic={class:"vuefinder__toolbar__controls"},cc=["title"],dc=["title"],uc={__name:"Toolbar",setup(n){const t=e.inject("ServiceContainer"),{setStore:o}=t.storage,{t:s}=t.i18n,r=t.dragSelect,i=e.ref("");t.emitter.on("vf-search-query",({newQuery:a})=>{i.value=a});const l=()=>{t.fullScreen=!t.fullScreen};e.watch(()=>t.fullScreen,()=>{t.fullScreen?document.querySelector("body").style.overflow="hidden":document.querySelector("body").style.overflow="",o("full-screen",t.fullScreen),t.emitter.emit("vf-fullscreen-toggle")});const c=()=>{t.view=t.view==="list"?"grid":"list",r.refreshSelection(),o("viewport",t.view)};return(a,d)=>(e.openBlock(),e.createElementBlock("div",Ji,[i.value.length?(e.openBlock(),e.createElementBlock("div",sc,[e.createElementVNode("div",lc,[e.createTextVNode(e.toDisplayString(e.unref(s)("Search results for"))+" ",1),e.createElementVNode("span",ac,e.toDisplayString(i.value),1)]),e.unref(t).loadingIndicator==="circular"&&e.unref(t).fs.loading?(e.openBlock(),e.createBlock(e.unref(On),{key:0})):e.createCommentVNode("",!0)])):(e.openBlock(),e.createElementBlock("div",Xi,[e.unref(t).features.includes(e.unref(Z).NEW_FOLDER)?(e.openBlock(),e.createElementBlock("div",{key:0,class:"mx-1.5",title:e.unref(s)("New Folder"),onClick:d[0]||(d[0]=m=>e.unref(t).modal.open(ar,{items:e.unref(r).getSelected()}))},[e.createVNode(e.unref(lr))],8,Zi)):e.createCommentVNode("",!0),e.unref(t).features.includes(e.unref(Z).NEW_FILE)?(e.openBlock(),e.createElementBlock("div",{key:1,class:"mx-1.5",title:e.unref(s)("New File"),onClick:d[1]||(d[1]=m=>e.unref(t).modal.open(Qa,{items:e.unref(r).getSelected()}))},[e.createVNode(e.unref(ir))],8,Qi)):e.createCommentVNode("",!0),e.unref(t).features.includes(e.unref(Z).RENAME)?(e.openBlock(),e.createElementBlock("div",{key:2,class:"mx-1.5",title:e.unref(s)("Rename"),onClick:d[2]||(d[2]=m=>e.unref(r).getCount()!==1||e.unref(t).modal.open(An,{items:e.unref(r).getSelected()}))},[e.createVNode(e.unref(sr),{class:e.normalizeClass(e.unref(r).getCount()===1?"vf-toolbar-icon":"vf-toolbar-icon-disabled")},null,8,["class"])],8,ec)):e.createCommentVNode("",!0),e.unref(t).features.includes(e.unref(Z).DELETE)?(e.openBlock(),e.createElementBlock("div",{key:3,class:"mx-1.5",title:e.unref(s)("Delete"),onClick:d[3]||(d[3]=m=>!e.unref(r).getCount()||e.unref(t).modal.open(Mn,{items:e.unref(r).getSelected()}))},[e.createVNode(e.unref(rr),{class:e.normalizeClass(e.unref(r).getCount()?"vf-toolbar-icon":"vf-toolbar-icon-disabled")},null,8,["class"])],8,tc)):e.createCommentVNode("",!0),e.unref(t).features.includes(e.unref(Z).UPLOAD)?(e.openBlock(),e.createElementBlock("div",{key:4,class:"mx-1.5",title:e.unref(s)("Upload"),onClick:d[4]||(d[4]=m=>e.unref(t).modal.open(_i,{items:e.unref(r).getSelected()}))},[e.createVNode(e.unref(cr))],8,nc)):e.createCommentVNode("",!0),e.unref(t).features.includes(e.unref(Z).UNARCHIVE)&&e.unref(r).getCount()===1&&(e.unref(r).getSelected()[0].mime_type||e.unref(r).getSelected()[0].mimeType)==="application/zip"?(e.openBlock(),e.createElementBlock("div",{key:5,class:"mx-1.5",title:e.unref(s)("Unarchive"),onClick:d[5]||(d[5]=m=>!e.unref(r).getCount()||e.unref(t).modal.open(ur,{items:e.unref(r).getSelected()}))},[e.createVNode(e.unref(dr),{class:e.normalizeClass(e.unref(r).getCount()?"vf-toolbar-icon":"vf-toolbar-icon-disabled")},null,8,["class"])],8,oc)):e.createCommentVNode("",!0),e.unref(t).features.includes(e.unref(Z).ARCHIVE)?(e.openBlock(),e.createElementBlock("div",{key:6,class:"mx-1.5",title:e.unref(s)("Archive"),onClick:d[6]||(d[6]=m=>!e.unref(r).getCount()||e.unref(t).modal.open(fr,{items:e.unref(r).getSelected()}))},[e.createVNode(e.unref(mr),{class:e.normalizeClass(e.unref(r).getCount()?"vf-toolbar-icon":"vf-toolbar-icon-disabled")},null,8,["class"])],8,rc)):e.createCommentVNode("",!0)])),e.createElementVNode("div",ic,[e.unref(t).features.includes(e.unref(Z).FULL_SCREEN)?(e.openBlock(),e.createElementBlock("div",{key:0,onClick:l,class:"mx-1.5",title:e.unref(s)("Toggle Full Screen")},[e.unref(t).fullScreen?(e.openBlock(),e.createBlock(e.unref(ji),{key:0})):(e.openBlock(),e.createBlock(e.unref(Ii),{key:1}))],8,cc)):e.createCommentVNode("",!0),e.createElementVNode("div",{class:"mx-1.5",title:e.unref(s)("Change View"),onClick:d[7]||(d[7]=m=>i.value.length||c())},[e.unref(t).view==="grid"?(e.openBlock(),e.createBlock(e.unref(Gi),{key:0,class:e.normalizeClass(["vf-toolbar-icon",i.value.length?"vf-toolbar-icon-disabled":""])},null,8,["class"])):e.createCommentVNode("",!0),e.unref(t).view==="list"?(e.openBlock(),e.createBlock(e.unref(Yi),{key:1,class:e.normalizeClass(["vf-toolbar-icon",i.value.length?"vf-toolbar-icon-disabled":""])},null,8,["class"])):e.createCommentVNode("",!0)],8,dc)])]))}},mc=(n,t=0,o=!1)=>{let s;return(...r)=>{o&&!s&&n(...r),clearTimeout(s),s=setTimeout(()=>{n(...r)},t)}},io=(n,t,o)=>{const s=e.ref(n);return e.customRef((r,i)=>({get(){return r(),s.value},set:mc(l=>{s.value=l,i()},t,o)}))},fc={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-width":"2","aria-hidden":"true",class:"h-6 w-6 stroke-blue-600 dark:stroke-blue-100",viewBox:"0 0 24 24"};function vc(n,t){return e.openBlock(),e.createElementBlock("svg",fc,t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3"},null,-1)]))}const pc={render:vc},_c={class:"vuefinder__move-modal__content"},hc={class:"vuefinder__move-modal__description"},gc={class:"vuefinder__move-modal__files vf-scrollbar"},kc={class:"vuefinder__move-modal__file"},wc={key:0,class:"vuefinder__move-modal__icon vuefinder__move-modal__icon--dir",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},bc={key:1,class:"vuefinder__move-modal__icon",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},yc={class:"vuefinder__move-modal__file-name"},Ec={class:"vuefinder__move-modal__target-title"},Vc={class:"vuefinder__move-modal__target-directory"},Sc={class:"vuefinder__move-modal__target-path"},Nc={class:"vuefinder__move-modal__selected-items"},gn={__name:"ModalMove",setup(n){const t=e.inject("ServiceContainer"),{t:o}=t.i18n,s=e.ref(t.modal.data.items.from),r=e.ref(""),i=()=>{s.value.length&&t.emitter.emit("vf-fetch",{params:{q:"move",m:"post",adapter:t.fs.adapter,path:t.fs.data.dirname},body:{items:s.value.map(({path:l,type:c})=>({path:l,type:c})),item:t.modal.data.items.to.path},onSuccess:()=>{t.emitter.emit("vf-toast-push",{label:o("Files moved.",t.modal.data.items.to.name)})},onError:l=>{r.value=o(l.message)}})};return(l,c)=>(e.openBlock(),e.createBlock(Ce,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:i,class:"vf-btn vf-btn-primary"},e.toDisplayString(e.unref(o)("Yes, Move!")),1),e.createElementVNode("button",{type:"button",onClick:c[1]||(c[1]=a=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(o)("Cancel")),1),e.createElementVNode("div",Nc,e.toDisplayString(e.unref(o)("%s item(s) selected.",s.value.length)),1)]),default:e.withCtx(()=>[e.createElementVNode("div",null,[e.createVNode(Oe,{icon:e.unref(pc),title:e.unref(o)("Move files")},null,8,["icon","title"]),e.createElementVNode("div",_c,[e.createElementVNode("p",hc,e.toDisplayString(e.unref(o)("Are you sure you want to move these files?")),1),e.createElementVNode("div",gc,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(s.value,a=>(e.openBlock(),e.createElementBlock("div",kc,[e.createElementVNode("div",null,[a.type==="dir"?(e.openBlock(),e.createElementBlock("svg",wc,c[2]||(c[2]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)]))):(e.openBlock(),e.createElementBlock("svg",bc,c[3]||(c[3]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)])))]),e.createElementVNode("div",yc,e.toDisplayString(a.path),1)]))),256))]),e.createElementVNode("h4",Ec,e.toDisplayString(e.unref(o)("Target Directory")),1),e.createElementVNode("p",Vc,[c[4]||(c[4]=e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"vuefinder__move-modal__icon vuefinder__move-modal__icon--dir",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})],-1)),e.createElementVNode("span",Sc,e.toDisplayString(e.unref(t).modal.data.items.to.path),1)]),r.value.length?(e.openBlock(),e.createBlock($e,{key:0,onHidden:c[0]||(c[0]=a=>r.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(r.value),1)]),_:1})):e.createCommentVNode("",!0)])])]),_:1}))}},xc={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"h-6 w-6 p-1 rounded text-slate-700 hover:bg-neutral-300 dark:text-neutral-200 dark:hover:bg-gray-700 cursor-pointer",viewBox:"-40 -40 580 580"};function Bc(n,t){return e.openBlock(),e.createElementBlock("svg",xc,t[0]||(t[0]=[e.createElementVNode("path",{d:"M463.5 224h8.5c13.3 0 24-10.7 24-24V72c0-9.7-5.8-18.5-14.8-22.2S461.9 48.1 455 55l-41.6 41.6c-87.6-86.5-228.7-86.2-315.8 1-87.5 87.5-87.5 229.3 0 316.8s229.3 87.5 316.8 0c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0c-62.5 62.5-163.8 62.5-226.3 0s-62.5-163.8 0-226.3c62.2-62.2 162.7-62.5 225.3-1L327 183c-6.9 6.9-8.9 17.2-5.2 26.2S334.3 224 344 224z"},null,-1)]))}const Cc={render:Bc},$c={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"h-6 w-6 p-0.5 rounded",viewBox:"0 0 20 20"};function Dc(n,t){return e.openBlock(),e.createElementBlock("svg",$c,t[0]||(t[0]=[e.createElementVNode("path",{"fill-rule":"evenodd",d:"M5.293 9.707a1 1 0 0 1 0-1.414l4-4a1 1 0 0 1 1.414 0l4 4a1 1 0 0 1-1.414 1.414L11 7.414V15a1 1 0 1 1-2 0V7.414L6.707 9.707a1 1 0 0 1-1.414 0",class:"pointer-events-none","clip-rule":"evenodd"},null,-1)]))}const Tc={render:Dc},Mc={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-width":"1.5",class:"h-6 w-6 p-1 rounded text-slate-700 hover:bg-neutral-300 dark:text-neutral-200 dark:hover:bg-gray-700 cursor-pointer",viewBox:"0 0 24 24"};function Ac(n,t){return e.openBlock(),e.createElementBlock("svg",Mc,t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18 18 6M6 6l12 12"},null,-1)]))}const Oc={render:Ac},Lc={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"h-6 w-6 p-1 rounded text-slate-700 hover:bg-neutral-100 dark:text-neutral-300 dark:hover:bg-gray-800 cursor-pointer",viewBox:"0 0 20 20"};function Fc(n,t){return e.openBlock(),e.createElementBlock("svg",Lc,t[0]||(t[0]=[e.createElementVNode("path",{d:"M10.707 2.293a1 1 0 0 0-1.414 0l-7 7a1 1 0 0 0 1.414 1.414L4 10.414V17a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-2a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-6.586l.293.293a1 1 0 0 0 1.414-1.414z",class:"pointer-events-none"},null,-1)]))}const Rc={render:Fc},Hc={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"h-6 w-6 p-1 m-auto stroke-gray-400 fill-gray-100 dark:stroke-gray-400 dark:fill-gray-400/20",viewBox:"0 0 20 20"};function Ic(n,t){return e.openBlock(),e.createElementBlock("svg",Hc,t[0]||(t[0]=[e.createElementVNode("path",{d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607"},null,-1)]))}const zc={render:Ic},Uc={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-width":"1.5",class:"w-6 h-6 cursor-pointer",viewBox:"0 0 24 24"};function jc(n,t){return e.openBlock(),e.createElementBlock("svg",Uc,t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18 18 6M6 6l12 12"},null,-1)]))}const qc={render:jc},Pc={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",class:"text-neutral-500 fill-sky-500 stroke-sky-500 dark:fill-slate-500 dark:stroke-slate-500",viewBox:"0 0 24 24"};function Gc(n,t){return e.openBlock(),e.createElementBlock("svg",Pc,t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-6l-2-2H5a2 2 0 0 0-2 2"},null,-1)]))}const jt={render:Gc},Wc={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",class:"h-6 w-6 p-1 rounded text-slate-700 dark:text-neutral-300 cursor-pointer",viewBox:"0 0 24 24"};function Kc(n,t){return e.openBlock(),e.createElementBlock("svg",Wc,t[0]||(t[0]=[e.createElementVNode("path",{stroke:"none",d:"M0 0h24v24H0z"},null,-1),e.createElementVNode("path",{d:"M9 6h11M12 12h8M15 18h5M5 6v.01M8 12v.01M11 18v.01"},null,-1)]))}const Yc={render:Kc},Jc={xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 rounded text-slate-700 hover:bg-neutral-100 dark:fill-neutral-300 dark:hover:bg-gray-800 cursor-pointer",viewBox:"0 0 448 512"};function Xc(n,t){return e.openBlock(),e.createElementBlock("svg",Jc,t[0]||(t[0]=[e.createElementVNode("path",{d:"M8 256a56 56 0 1 1 112 0 56 56 0 1 1-112 0m160 0a56 56 0 1 1 112 0 56 56 0 1 1-112 0m216-56a56 56 0 1 1 0 112 56 56 0 1 1 0-112"},null,-1)]))}const Zc={render:Xc},Qc={class:"vuefinder__breadcrumb__container"},ed=["title"],td=["title"],nd=["title"],od=["title"],rd={class:"vuefinder__breadcrumb__list"},sd={key:0,class:"vuefinder__breadcrumb__hidden-list"},ld={class:"relative"},ad=["onDragover","onDragleave","onDrop","title","onClick"],id={class:"vuefinder__breadcrumb__search-mode"},cd=["placeholder"],dd={class:"vuefinder__breadcrumb__hidden-dropdown"},ud=["onDrop","onClick"],md={class:"vuefinder__breadcrumb__hidden-item-content"},fd={class:"vuefinder__breadcrumb__hidden-item-text"},vd={__name:"Breadcrumb",setup(n){const t=e.inject("ServiceContainer"),{t:o}=t.i18n,s=t.dragSelect,{setStore:r}=t.storage,i=e.ref(null),l=io(0,100);e.watch(l,B=>{const y=i.value.children;let b=0,V=0,S=5,D=1;t.fs.limitBreadcrumbItems(S),e.nextTick(()=>{for(let E=y.length-1;E>=0&&!(b+y[E].offsetWidth>l.value-40);E--)b+=parseInt(y[E].offsetWidth,10),V++;V<D&&(V=D),V>S&&(V=S),t.fs.limitBreadcrumbItems(V)})});const c=()=>{l.value=i.value.offsetWidth};let a=e.ref(null);e.onMounted(()=>{a.value=new ResizeObserver(c),a.value.observe(i.value)}),e.onUnmounted(()=>{a.value.disconnect()});const d=(B,y=null)=>{B.preventDefault(),s.isDraggingRef.value=!1,v(B),y??(y=t.fs.hiddenBreadcrumbs.length-1);let b=JSON.parse(B.dataTransfer.getData("items"));if(b.find(V=>V.storage!==t.fs.adapter)){alert("Moving items between different storages is not supported yet.");return}t.modal.open(gn,{items:{from:b,to:t.fs.hiddenBreadcrumbs[y]??{path:t.fs.adapter+"://"}}})},m=(B,y=null)=>{B.preventDefault(),s.isDraggingRef.value=!1,v(B),y??(y=t.fs.breadcrumbs.length-2);let b=JSON.parse(B.dataTransfer.getData("items"));if(b.find(V=>V.storage!==t.fs.adapter)){alert("Moving items between different storages is not supported yet.");return}t.modal.open(gn,{items:{from:b,to:t.fs.breadcrumbs[y]??{path:t.fs.adapter+"://"}}})},u=B=>{B.preventDefault(),t.fs.isGoUpAvailable()?(B.dataTransfer.dropEffect="copy",B.currentTarget.classList.add("bg-blue-200","dark:bg-slate-600")):(B.dataTransfer.dropEffect="none",B.dataTransfer.effectAllowed="none")},v=B=>{B.preventDefault(),B.currentTarget.classList.remove("bg-blue-200","dark:bg-slate-600"),t.fs.isGoUpAvailable()&&B.currentTarget.classList.remove("bg-blue-200","dark:bg-slate-600")},f=()=>{C(),t.emitter.emit("vf-fetch",{params:{q:"index",adapter:t.fs.adapter,path:t.fs.data.dirname}})},_=()=>{C(),!t.fs.isGoUpAvailable()||t.emitter.emit("vf-fetch",{params:{q:"index",adapter:t.fs.adapter,path:t.fs.parentFolderPath}})},p=B=>{t.emitter.emit("vf-fetch",{params:{q:"index",adapter:t.fs.adapter,path:B.path}}),t.fs.toggleHiddenBreadcrumbs(!1)},g=()=>{t.fs.showHiddenBreadcrumbs&&t.fs.toggleHiddenBreadcrumbs(!1)},w={mounted(B,y,b,V){B.clickOutsideEvent=function(S){B===S.target||B.contains(S.target)||y.value()},document.body.addEventListener("click",B.clickOutsideEvent)},beforeUnmount(B,y,b,V){document.body.removeEventListener("click",B.clickOutsideEvent)}},M=()=>{t.showTreeView=!t.showTreeView};e.watch(()=>t.showTreeView,(B,y)=>{B!==y&&r("show-tree-view",B)});const h=e.ref(null),k=()=>{t.features.includes(Z.SEARCH)&&(t.fs.searchMode=!0,e.nextTick(()=>h.value.focus()))},x=io("",400);e.watch(x,B=>{t.emitter.emit("vf-toast-clear"),t.emitter.emit("vf-search-query",{newQuery:B})}),e.watch(()=>t.fs.searchMode,B=>{B&&e.nextTick(()=>h.value.focus())});const C=()=>{t.fs.searchMode=!1,x.value=""};t.emitter.on("vf-search-exit",()=>{C()});const H=()=>{x.value===""&&C()};return(B,y)=>(e.openBlock(),e.createElementBlock("div",Qc,[e.createElementVNode("span",{title:e.unref(o)("Toggle Tree View")},[e.createVNode(e.unref(Yc),{onClick:M,class:e.normalizeClass(["vuefinder__breadcrumb__toggle-tree",e.unref(t).showTreeView?"vuefinder__breadcrumb__toggle-tree--active":""])},null,8,["class"])],8,ed),e.createElementVNode("span",{title:e.unref(o)("Go up a directory")},[e.createVNode(e.unref(Tc),{onDragover:y[0]||(y[0]=b=>u(b)),onDragleave:y[1]||(y[1]=b=>v(b)),onDrop:y[2]||(y[2]=b=>m(b)),onClick:_,class:e.normalizeClass(e.unref(t).fs.isGoUpAvailable()?"vuefinder__breadcrumb__go-up--active":"vuefinder__breadcrumb__go-up--inactive")},null,8,["class"])],8,td),e.unref(t).fs.loading?(e.openBlock(),e.createElementBlock("span",{key:1,title:e.unref(o)("Cancel")},[e.createVNode(e.unref(Oc),{onClick:y[3]||(y[3]=b=>e.unref(t).emitter.emit("vf-fetch-abort"))})],8,od)):(e.openBlock(),e.createElementBlock("span",{key:0,title:e.unref(o)("Refresh")},[e.createVNode(e.unref(Cc),{onClick:f})],8,nd)),e.withDirectives(e.createElementVNode("div",{onClick:e.withModifiers(k,["self"]),class:"group vuefinder__breadcrumb__search-container"},[e.createElementVNode("div",null,[e.createVNode(e.unref(Rc),{onDragover:y[4]||(y[4]=b=>u(b)),onDragleave:y[5]||(y[5]=b=>v(b)),onDrop:y[6]||(y[6]=b=>m(b,-1)),onClick:y[7]||(y[7]=b=>e.unref(t).emitter.emit("vf-fetch",{params:{q:"index",adapter:e.unref(t).fs.adapter}}))})]),e.createElementVNode("div",rd,[e.unref(t).fs.hiddenBreadcrumbs.length?e.withDirectives((e.openBlock(),e.createElementBlock("div",sd,[y[13]||(y[13]=e.createElementVNode("div",{class:"vuefinder__breadcrumb__separator"},"/",-1)),e.createElementVNode("div",ld,[e.createElementVNode("span",{onDragenter:y[8]||(y[8]=b=>e.unref(t).fs.toggleHiddenBreadcrumbs(!0)),onClick:y[9]||(y[9]=b=>e.unref(t).fs.toggleHiddenBreadcrumbs()),class:"vuefinder__breadcrumb__hidden-toggle"},[e.createVNode(e.unref(Zc),{class:"vuefinder__breadcrumb__hidden-toggle-icon"})],32)])])),[[w,g]]):e.createCommentVNode("",!0)]),e.createElementVNode("div",{ref_key:"breadcrumbContainer",ref:i,class:"vuefinder__breadcrumb__visible-list",onClick:e.withModifiers(k,["self"])},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(t).fs.breadcrumbs,(b,V)=>(e.openBlock(),e.createElementBlock("div",{key:V},[y[14]||(y[14]=e.createElementVNode("span",{class:"vuefinder__breadcrumb__separator"},"/",-1)),e.createElementVNode("span",{onDragover:S=>V===e.unref(t).fs.breadcrumbs.length-1||u(S),onDragleave:S=>V===e.unref(t).fs.breadcrumbs.length-1||v(S),onDrop:S=>V===e.unref(t).fs.breadcrumbs.length-1||m(S,V),class:"vuefinder__breadcrumb__item",title:b.basename,onClick:S=>e.unref(t).emitter.emit("vf-fetch",{params:{q:"index",adapter:e.unref(t).fs.adapter,path:b.path}})},e.toDisplayString(b.name),41,ad)]))),128))],512),e.unref(t).loadingIndicator==="circular"&&e.unref(t).fs.loading?(e.openBlock(),e.createBlock(e.unref(On),{key:0})):e.createCommentVNode("",!0)],512),[[e.vShow,!e.unref(t).fs.searchMode]]),e.withDirectives(e.createElementVNode("div",id,[e.createElementVNode("div",null,[e.createVNode(e.unref(zc))]),e.withDirectives(e.createElementVNode("input",{ref_key:"searchInput",ref:h,onKeydown:e.withKeys(C,["esc"]),onBlur:H,"onUpdate:modelValue":y[10]||(y[10]=b=>e.isRef(x)?x.value=b:null),placeholder:e.unref(o)("Search anything.."),class:"vuefinder__breadcrumb__search-input",type:"text"},null,40,cd),[[e.vModelText,e.unref(x)]]),e.createVNode(e.unref(qc),{onClick:C})],512),[[e.vShow,e.unref(t).fs.searchMode]]),e.withDirectives(e.createElementVNode("div",dd,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(t).fs.hiddenBreadcrumbs,(b,V)=>(e.openBlock(),e.createElementBlock("div",{key:V,onDragover:y[11]||(y[11]=S=>u(S)),onDragleave:y[12]||(y[12]=S=>v(S)),onDrop:S=>d(S,V),onClick:S=>p(b),class:"vuefinder__breadcrumb__hidden-item"},[e.createElementVNode("div",md,[e.createElementVNode("span",null,[e.createVNode(e.unref(jt),{class:"vuefinder__breadcrumb__hidden-item-icon"})]),y[15]||(y[15]=e.createTextVNode()),e.createElementVNode("span",fd,e.toDisplayString(b.name),1)])],40,ud))),128))],512),[[e.vShow,e.unref(t).fs.showHiddenBreadcrumbs]])]))}};function pd(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function _d(n){if(typeof n!="number")throw new TypeError("Expected a number");return{days:Math.trunc(n/864e5),hours:Math.trunc(n/36e5)%24,minutes:Math.trunc(n/6e4)%60,seconds:Math.trunc(n/1e3)%60,ms:Math.trunc(n)%1e3}}function Ue(n,t){t=t||2;let o=n.toString(),s=0;return s=t-o.length+1,o=new Array(s).join("0").concat(o),o}function hd(n,t){return t?n<0?"-":"":n<=-1e3?"-":""}function gd(n,t){const o=t&&t.leading,s=t&&t.ms,r=n<0?-n:n,i=hd(n,s),l=_d(r),c=Ue(l.seconds);let a="";return l.days&&!a&&(a=i+l.days+":"+Ue(l.hours)+":"+Ue(l.minutes)+":"+c),l.hours&&!a&&(a=i+(o?Ue(l.hours):l.hours)+":"+Ue(l.minutes)+":"+c),a||(a=i+(o?Ue(l.minutes):l.minutes)+":"+c),s&&(a+="."+Ue(l.ms,3)),a}var kd=gd;const wd=pd(kd),vr=(n,t=null)=>new Date(n*1e3).toLocaleString(t??navigator.language??"en-US"),bd=["onClick"],yd={__name:"Toast",setup(n){const t=e.inject("ServiceContainer"),{getStore:o}=t.storage,s=e.ref(o("full-screen",!1)),r=e.ref([]),i=a=>a==="error"?"text-red-400 border-red-400 dark:text-red-300 dark:border-red-300":"text-lime-600 border-lime-600 dark:text-lime-300 dark:border-lime-1300",l=a=>{r.value.splice(a,1)},c=a=>{let d=r.value.findIndex(m=>m.id===a);d!==-1&&l(d)};return t.emitter.on("vf-toast-clear",()=>{r.value=[]}),t.emitter.on("vf-toast-push",a=>{let d=new Date().getTime().toString(36).concat(performance.now().toString(),Math.random().toString()).replace(/\./g,"");a.id=d,r.value.push(a),setTimeout(()=>{c(d)},5e3)}),(a,d)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["vuefinder__toast",s.value.value?"vuefinder__toast--fixed":"vuefinder__toast--absolute"])},[e.createVNode(e.TransitionGroup,{name:"vuefinder__toast-item","enter-active-class":"vuefinder__toast-item--enter-active","leave-active-class":"vuefinder__toast-item--leave-active","leave-to-class":"vuefinder__toast-item--leave-to"},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.value,(m,u)=>(e.openBlock(),e.createElementBlock("div",{key:u,onClick:v=>l(u),class:e.normalizeClass(["vuefinder__toast__message",i(m.type)])},e.toDisplayString(m.label),11,bd))),128))]),_:1})],2))}},Ed={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"h-5 w-5",viewBox:"0 0 20 20"};function Vd(n,t){return e.openBlock(),e.createElementBlock("svg",Ed,t[0]||(t[0]=[e.createElementVNode("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 0 1 1.414 0L10 10.586l3.293-3.293a1 1 0 1 1 1.414 1.414l-4 4a1 1 0 0 1-1.414 0l-4-4a1 1 0 0 1 0-1.414","clip-rule":"evenodd"},null,-1)]))}const Sd={render:Vd},Nd={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"h-5 w-5",viewBox:"0 0 20 20"};function xd(n,t){return e.openBlock(),e.createElementBlock("svg",Nd,t[0]||(t[0]=[e.createElementVNode("path",{"fill-rule":"evenodd",d:"M14.707 12.707a1 1 0 0 1-1.414 0L10 9.414l-3.293 3.293a1 1 0 0 1-1.414-1.414l4-4a1 1 0 0 1 1.414 0l4 4a1 1 0 0 1 0 1.414","clip-rule":"evenodd"},null,-1)]))}const Bd={render:xd},bt={__name:"SortIcon",props:{direction:String},setup(n){return(t,o)=>(e.openBlock(),e.createElementBlock("div",null,[n.direction==="asc"?(e.openBlock(),e.createBlock(e.unref(Sd),{key:0})):e.createCommentVNode("",!0),n.direction==="desc"?(e.openBlock(),e.createBlock(e.unref(Bd),{key:1})):e.createCommentVNode("",!0)]))}},Cd={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",class:"text-neutral-500",viewBox:"0 0 24 24"};function $d(n,t){return e.openBlock(),e.createElementBlock("svg",Cd,t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 0 0 2-2V9.414a1 1 0 0 0-.293-.707l-5.414-5.414A1 1 0 0 0 12.586 3H7a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2"},null,-1)]))}const Dd={render:$d},Td={class:"vuefinder__item-icon"},Qt={__name:"ItemIcon",props:{type:{type:String,required:!0},small:{type:Boolean,default:!1}},setup(n){return(t,o)=>(e.openBlock(),e.createElementBlock("span",Td,[n.type==="dir"?(e.openBlock(),e.createBlock(e.unref(jt),{key:0,class:e.normalizeClass(n.small?"vuefinder__item-icon--small":"vuefinder__item-icon--large")},null,8,["class"])):(e.openBlock(),e.createBlock(e.unref(Dd),{key:1,class:e.normalizeClass(n.small?"vuefinder__item-icon--small":"vuefinder__item-icon--large")},null,8,["class"]))]))}},Md={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",class:"absolute h-6 w-6 md:h-12 md:w-12 m-auto stroke-neutral-500 fill-white dark:fill-gray-700 dark:stroke-gray-600 z-10",viewBox:"0 0 24 24"};function Ad(n,t){return e.openBlock(),e.createElementBlock("svg",Md,t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 0 0 2-2V9.414a1 1 0 0 0-.293-.707l-5.414-5.414A1 1 0 0 0 12.586 3H7a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2"},null,-1)]))}const Od={render:Ad},Ld={class:"vuefinder__drag-item__container"},Fd={class:"vuefinder__drag-item__count"},Rd={__name:"DragItem",props:{count:{type:Number,default:0}},setup(n){const t=n;return(o,s)=>(e.openBlock(),e.createElementBlock("div",Ld,[e.createVNode(e.unref(Od)),e.createElementVNode("div",Fd,e.toDisplayString(t.count),1)]))}},Hd={class:"vuefinder__text-preview"},Id={class:"vuefinder__text-preview__header"},zd=["title"],Ud={class:"vuefinder__text-preview__actions"},jd={key:0,class:"vuefinder__text-preview__content"},qd={key:1},Pd={__name:"Text",emits:["success"],setup(n,{emit:t}){const o=t,s=e.ref(""),r=e.ref(""),i=e.ref(null),l=e.ref(!1),c=e.ref(""),a=e.ref(!1),d=e.inject("ServiceContainer"),{t:m}=d.i18n;e.onMounted(()=>{d.requester.send({url:"",method:"get",params:{q:"preview",adapter:d.modal.data.adapter,path:d.modal.data.item.path},responseType:"text"}).then(f=>{s.value=f,o("success")})});const u=()=>{l.value=!l.value,r.value=s.value},v=()=>{c.value="",a.value=!1,d.requester.send({url:"",method:"post",params:{q:"save",adapter:d.modal.data.adapter,path:d.modal.data.item.path},body:{content:r.value},responseType:"text"}).then(f=>{c.value=m("Updated."),s.value=f,o("success"),l.value=!l.value}).catch(f=>{c.value=m(f.message),a.value=!0})};return(f,_)=>(e.openBlock(),e.createElementBlock("div",Hd,[e.createElementVNode("div",Id,[e.createElementVNode("div",{class:"vuefinder__text-preview__title",id:"modal-title",title:e.unref(d).modal.data.item.path},e.toDisplayString(e.unref(d).modal.data.item.basename),9,zd),e.createElementVNode("div",Ud,[l.value?(e.openBlock(),e.createElementBlock("button",{key:0,onClick:v,class:"vuefinder__text-preview__save-button"},e.toDisplayString(e.unref(m)("Save")),1)):e.createCommentVNode("",!0),e.unref(d).features.includes(e.unref(Z).EDIT)?(e.openBlock(),e.createElementBlock("button",{key:1,class:"vuefinder__text-preview__edit-button",onClick:_[0]||(_[0]=p=>u())},e.toDisplayString(l.value?e.unref(m)("Cancel"):e.unref(m)("Edit")),1)):e.createCommentVNode("",!0)])]),e.createElementVNode("div",null,[l.value?(e.openBlock(),e.createElementBlock("div",qd,[e.withDirectives(e.createElementVNode("textarea",{ref_key:"editInput",ref:i,"onUpdate:modelValue":_[1]||(_[1]=p=>r.value=p),class:"vuefinder__text-preview__textarea",name:"text",cols:"30",rows:"10"},null,512),[[e.vModelText,r.value]])])):(e.openBlock(),e.createElementBlock("pre",jd,e.toDisplayString(s.value),1)),c.value.length?(e.openBlock(),e.createBlock($e,{key:2,onHidden:_[2]||(_[2]=p=>c.value=""),error:a.value},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(c.value),1)]),_:1},8,["error"])):e.createCommentVNode("",!0)])]))}},Gd={class:"vuefinder__image-preview"},Wd={class:"vuefinder__image-preview__header"},Kd=["title"],Yd={class:"vuefinder__image-preview__actions"},Jd={class:"vuefinder__image-preview__image-container"},Xd=["src"],Zd={__name:"Image",emits:["success"],setup(n,{emit:t}){const o=t,s=e.inject("ServiceContainer"),{t:r}=s.i18n,i=e.ref(null),l=e.ref(null),c=e.ref(!1),a=e.ref(""),d=e.ref(!1),m=()=>{c.value=!c.value,c.value?l.value=new Or(i.value,{crop(v){}}):l.value.destroy()},u=()=>{l.value.getCroppedCanvas({width:795,height:341}).toBlob(v=>{a.value="",d.value=!1;const f=new FormData;f.set("file",v),s.requester.send({url:"",method:"post",params:{q:"upload",adapter:s.modal.data.adapter,path:s.modal.data.item.path},body:f}).then(_=>{a.value=r("Updated."),i.value.src=s.requester.getPreviewUrl(s.modal.data.adapter,s.modal.data.item),m(),o("success")}).catch(_=>{a.value=r(_.message),d.value=!0})})};return e.onMounted(()=>{o("success")}),(v,f)=>(e.openBlock(),e.createElementBlock("div",Gd,[e.createElementVNode("div",Wd,[e.createElementVNode("h3",{class:"vuefinder__image-preview__title",id:"modal-title",title:e.unref(s).modal.data.item.path},e.toDisplayString(e.unref(s).modal.data.item.basename),9,Kd),e.createElementVNode("div",Yd,[c.value?(e.openBlock(),e.createElementBlock("button",{key:0,onClick:u,class:"vuefinder__image-preview__crop-button"},e.toDisplayString(e.unref(r)("Crop")),1)):e.createCommentVNode("",!0),e.unref(s).features.includes(e.unref(Z).EDIT)?(e.openBlock(),e.createElementBlock("button",{key:1,class:"vuefinder__image-preview__edit-button",onClick:f[0]||(f[0]=_=>m())},e.toDisplayString(c.value?e.unref(r)("Cancel"):e.unref(r)("Edit")),1)):e.createCommentVNode("",!0)])]),e.createElementVNode("div",Jd,[e.createElementVNode("img",{ref_key:"image",ref:i,class:"vuefinder__image-preview__image",src:e.unref(s).requester.getPreviewUrl(e.unref(s).modal.data.adapter,e.unref(s).modal.data.item),alt:""},null,8,Xd)]),a.value.length?(e.openBlock(),e.createBlock($e,{key:0,onHidden:f[1]||(f[1]=_=>a.value=""),error:d.value},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(a.value),1)]),_:1},8,["error"])):e.createCommentVNode("",!0)]))}},Qd={class:"vuefinder__default-preview"},eu={class:"vuefinder__default-preview__header"},tu=["title"],nu={__name:"Default",emits:["success"],setup(n,{emit:t}){const o=e.inject("ServiceContainer"),s=t;return e.onMounted(()=>{s("success")}),(r,i)=>(e.openBlock(),e.createElementBlock("div",Qd,[e.createElementVNode("div",eu,[e.createElementVNode("h3",{class:"vuefinder__default-preview__title",id:"modal-title",title:e.unref(o).modal.data.item.path},e.toDisplayString(e.unref(o).modal.data.item.basename),9,tu)]),i[0]||(i[0]=e.createElementVNode("div",null,null,-1))]))}},ou={class:"vuefinder__video-preview"},ru=["title"],su={class:"vuefinder__video-preview__video",preload:"",controls:""},lu=["src"],au={__name:"Video",emits:["success"],setup(n,{emit:t}){const o=e.inject("ServiceContainer"),s=t,r=()=>o.requester.getPreviewUrl(o.modal.data.adapter,o.modal.data.item);return e.onMounted(()=>{s("success")}),(i,l)=>(e.openBlock(),e.createElementBlock("div",ou,[e.createElementVNode("h3",{class:"vuefinder__video-preview__title",id:"modal-title",title:e.unref(o).modal.data.item.path},e.toDisplayString(e.unref(o).modal.data.item.basename),9,ru),e.createElementVNode("div",null,[e.createElementVNode("video",su,[e.createElementVNode("source",{src:r(),type:"video/mp4"},null,8,lu),l[0]||(l[0]=e.createTextVNode(" Your browser does not support the video tag. "))])])]))}},iu={class:"vuefinder__audio-preview"},cu=["title"],du={class:"vuefinder__audio-preview__audio",controls:""},uu=["src"],mu={__name:"Audio",emits:["success"],setup(n,{emit:t}){const o=t,s=e.inject("ServiceContainer"),r=()=>s.requester.getPreviewUrl(s.modal.data.adapter,s.modal.data.item);return e.onMounted(()=>{o("success")}),(i,l)=>(e.openBlock(),e.createElementBlock("div",iu,[e.createElementVNode("h3",{class:"vuefinder__audio-preview__title",id:"modal-title",title:e.unref(s).modal.data.item.path},e.toDisplayString(e.unref(s).modal.data.item.basename),9,cu),e.createElementVNode("div",null,[e.createElementVNode("audio",du,[e.createElementVNode("source",{src:r(),type:"audio/mpeg"},null,8,uu),l[0]||(l[0]=e.createTextVNode(" Your browser does not support the audio element. "))])])]))}},fu={class:"vuefinder__pdf-preview"},vu=["title"],pu=["data"],_u=["src"],hu={__name:"Pdf",emits:["success"],setup(n,{emit:t}){const o=e.inject("ServiceContainer"),s=t,r=()=>o.requester.getPreviewUrl(o.modal.data.adapter,o.modal.data.item);return e.onMounted(()=>{s("success")}),(i,l)=>(e.openBlock(),e.createElementBlock("div",fu,[e.createElementVNode("h3",{class:"vuefinder__pdf-preview__title",id:"modal-title",title:e.unref(o).modal.data.item.path},e.toDisplayString(e.unref(o).modal.data.item.basename),9,vu),e.createElementVNode("div",null,[e.createElementVNode("object",{class:"vuefinder__pdf-preview__object",data:r(),type:"application/pdf",width:"100%",height:"100%"},[e.createElementVNode("iframe",{class:"vuefinder__pdf-preview__iframe",src:r(),width:"100%",height:"100%"}," Your browser does not support PDFs ",8,_u)],8,pu)])]))}},gu={class:"vuefinder__preview-modal__content"},ku={key:0},wu={class:"vuefinder__preview-modal__loading"},bu={key:0,class:"vuefinder__preview-modal__loading-indicator"},yu={key:0,class:"vuefinder__preview-modal__details"},Eu={class:"vuefinder__preview-modal__details"},Vu={class:"font-bold"},Su={class:"font-bold pl-2"},Nu={key:1,class:"vuefinder__preview-modal__note"},xu=["download","href"],pr={__name:"ModalPreview",setup(n){const t=e.inject("ServiceContainer"),{t:o}=t.i18n,s=e.ref(!1),r=c=>((t.modal.data.item.mime_type||t.modal.data.item.mimeType)??"").startsWith(c),i=t.features.includes(Z.PREVIEW);i||(s.value=!0);const l=c=>{let a="";return c.artist&&(a+=`${c.artist}`,c.title&&(a+=` - ${c.title}`)),a};return(c,a)=>(e.openBlock(),e.createBlock(Ce,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:a[6]||(a[6]=d=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(o)("Close")),1),e.unref(t).features.includes(e.unref(Z).DOWNLOAD)?(e.openBlock(),e.createElementBlock("a",{key:0,target:"_blank",class:"vf-btn vf-btn-primary",download:e.unref(t).requester.getDownloadUrl(e.unref(t).modal.data.adapter,e.unref(t).modal.data.item),href:e.unref(t).requester.getDownloadUrl(e.unref(t).modal.data.adapter,e.unref(t).modal.data.item)},e.toDisplayString(e.unref(o)("Download")),9,xu)):e.createCommentVNode("",!0)]),default:e.withCtx(()=>[e.createElementVNode("div",null,[e.createElementVNode("div",gu,[e.unref(i)?(e.openBlock(),e.createElementBlock("div",ku,[r("text")?(e.openBlock(),e.createBlock(Pd,{key:0,onSuccess:a[0]||(a[0]=d=>s.value=!0)})):r("image")?(e.openBlock(),e.createBlock(Zd,{key:1,onSuccess:a[1]||(a[1]=d=>s.value=!0)})):r("video")?(e.openBlock(),e.createBlock(au,{key:2,onSuccess:a[2]||(a[2]=d=>s.value=!0)})):r("audio")?(e.openBlock(),e.createBlock(mu,{key:3,onSuccess:a[3]||(a[3]=d=>s.value=!0)})):r("application/pdf")?(e.openBlock(),e.createBlock(hu,{key:4,onSuccess:a[4]||(a[4]=d=>s.value=!0)})):(e.openBlock(),e.createBlock(nu,{key:5,onSuccess:a[5]||(a[5]=d=>s.value=!0)}))])):e.createCommentVNode("",!0),e.createElementVNode("div",wu,[s.value===!1?(e.openBlock(),e.createElementBlock("div",bu,[a[7]||(a[7]=e.createElementVNode("svg",{class:"vuefinder__preview-modal__spinner",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e.createElementVNode("circle",{class:"vuefinder__preview-modal__spinner-circle",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e.createElementVNode("path",{class:"vuefinder__preview-modal__spinner-path",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),e.createElementVNode("span",null,e.toDisplayString(e.unref(o)("Loading")),1)])):e.createCommentVNode("",!0)])])]),((e.unref(t).modal.data.item.mime_type||e.unref(t).modal.data.item.mimeType)??"").startsWith("audio")?(e.openBlock(),e.createElementBlock("div",yu,e.toDisplayString(l(e.unref(t).modal.data.item)),1)):e.createCommentVNode("",!0),e.createElementVNode("div",Eu,[e.createElementVNode("div",null,[e.createElementVNode("span",Vu,e.toDisplayString(e.unref(o)("File Size"))+": ",1),e.createTextVNode(e.toDisplayString(e.unref(t).filesize(e.unref(t).modal.data.item.file_size)),1)]),e.createElementVNode("div",null,[e.createElementVNode("span",Su,e.toDisplayString(e.unref(o)("Last Modified"))+": ",1),e.createTextVNode(" "+e.toDisplayString(e.unref(vr)(e.unref(t).modal.data.item.last_modified)),1)])]),e.unref(t).features.includes(e.unref(Z).DOWNLOAD)?(e.openBlock(),e.createElementBlock("div",Nu,[e.createElementVNode("span",null,e.toDisplayString(e.unref(o)(`Download doesn't work? You can try right-click "Download" button, select "Save link as...".`)),1)])):e.createCommentVNode("",!0)]),_:1}))}},Bu={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",class:"h-5 w-5",viewBox:"0 0 24 24"};function Cu(n,t){return e.openBlock(),e.createElementBlock("svg",Bu,t[0]||(t[0]=[e.createElementVNode("path",{stroke:"none",d:"M0 0h24v24H0z"},null,-1),e.createElementVNode("path",{d:"m15 4.5-4 4L7 10l-1.5 1.5 7 7L14 17l1.5-4 4-4M9 15l-4.5 4.5M14.5 4 20 9.5"},null,-1)]))}const _r={render:Cu},$u=["data-type","data-item","data-index"],en={__name:"Item",props:e.mergeModels({index:{type:Number},dragImage:{type:Object}},{item:{type:Object},itemModifiers:{}}),emits:["update:item"],setup(n){const t=e.inject("ServiceContainer"),o=t.dragSelect,s=n,r=e.useModel(n,"item"),i=e.ref();al(i,([p])=>{p.attributeName==="data-item"&&(r.value=JSON.parse(i.value.dataset.item))},{attributes:!0});const l=p=>{p.type==="dir"?(t.emitter.emit("vf-search-exit"),t.emitter.emit("vf-fetch",{params:{q:"index",adapter:t.fs.adapter,path:p.path}})):t.modal.open(pr,{adapter:t.fs.adapter,item:p})},c={mounted(p,g,w,M){w.props.draggable&&(p.addEventListener("dragstart",h=>a(h,g.value)),p.addEventListener("dragover",h=>m(h,g.value)),p.addEventListener("drop",h=>d(h,g.value)))},beforeUnmount(p,g,w,M){w.props.draggable&&(p.removeEventListener("dragstart",a),p.removeEventListener("dragover",m),p.removeEventListener("drop",d))}},a=(p,g)=>{if(p.altKey||p.ctrlKey||p.metaKey)return p.preventDefault(),!1;o.isDraggingRef.value=!0,p.dataTransfer.setDragImage(s.dragImage.$el,0,15),p.dataTransfer.effectAllowed="all",p.dataTransfer.dropEffect="copy",p.dataTransfer.setData("items",JSON.stringify(o.getSelected()))},d=(p,g)=>{p.preventDefault(),o.isDraggingRef.value=!1;let w=JSON.parse(p.dataTransfer.getData("items"));if(w.find(M=>M.storage!==t.fs.adapter)){alert("Moving items between different storages is not supported yet.");return}t.modal.open(gn,{items:{from:w,to:g}})},m=(p,g)=>{p.preventDefault(),!g||g.type!=="dir"||o.getSelection().find(w=>w===p.currentTarget)?(p.dataTransfer.dropEffect="none",p.dataTransfer.effectAllowed="none"):p.dataTransfer.dropEffect="copy"};let u=null,v=!1;const f=()=>{u&&clearTimeout(u)},_=p=>{if(!v)v=!0,setTimeout(()=>v=!1,300);else return v=!1,l(r.value),clearTimeout(u),!1;u=setTimeout(()=>{const g=new MouseEvent("contextmenu",{bubbles:!0,cancelable:!1,view:window,button:2,buttons:0,clientX:p.target.getBoundingClientRect().x,clientY:p.target.getBoundingClientRect().y});p.target.dispatchEvent(g)},500)};return(p,g)=>e.withDirectives((e.openBlock(),e.createElementBlock("div",{style:e.normalizeStyle({opacity:e.unref(o).isDraggingRef.value&&e.unref(o).getSelection().find(w=>p.$el===w)?"0.5 !important":""}),class:e.normalizeClass(["vuefinder__item","vf-item-"+e.unref(o).explorerId]),"data-type":r.value.type,key:r.value.path,"data-item":JSON.stringify(r.value),"data-index":n.index,onDblclick:g[0]||(g[0]=w=>l(r.value)),onTouchstartPassive:g[1]||(g[1]=w=>_(w)),onTouchend:g[2]||(g[2]=w=>f()),onContextmenu:g[3]||(g[3]=e.withModifiers(w=>e.unref(t).emitter.emit("vf-contextmenu-show",{event:w,items:e.unref(o).getSelected(),target:r.value}),["prevent"])),ref_key:"itemRef",ref:i},[e.renderSlot(p.$slots,"default"),e.unref(t).pinnedFolders.find(w=>w.path===r.value.path)?(e.openBlock(),e.createBlock(e.unref(_r),{key:0,class:"vuefinder__item--pinned"})):e.createCommentVNode("",!0)],46,$u)),[[c,r.value]])}},Du={class:"vuefinder__explorer__container"},Tu={key:0,class:"vuefinder__explorer__header"},Mu={class:"vuefinder__explorer__drag-item"},Au={key:0,class:"vuefinder__linear-loader absolute"},Ou={class:"vuefinder__explorer__item-list-content"},Lu={class:"vuefinder__explorer__item-list-name"},Fu={class:"vuefinder__explorer__item-name"},Ru={class:"vuefinder__explorer__item-path"},Hu={class:"vuefinder__explorer__item-list-content"},Iu={class:"vuefinder__explorer__item-list-name"},zu=["title"],Uu={key:0},ju={key:0},qu={class:"vuefinder__explorer__item-size"},Pu={key:0},Gu={class:"vuefinder__explorer__item-date"},Wu={class:"vuefinder__explorer__item-grid-content"},Ku=["data-src","alt"],Yu={key:2,class:"vuefinder__explorer__item-extension"},Ju={class:"vuefinder__explorer__item-title break-all"},Xu={__name:"Explorer",setup(n){const t=e.inject("ServiceContainer"),{t:o}=t.i18n,s=f=>f==null?void 0:f.substring(0,3),r=e.ref(null),i=e.ref(""),l=t.dragSelect;let c;t.emitter.on("vf-fullscreen-toggle",()=>{l.area.value.style.height=null}),t.emitter.on("vf-search-query",({newQuery:f})=>{i.value=f,f?t.emitter.emit("vf-fetch",{params:{q:"search",adapter:t.fs.adapter,path:t.fs.data.dirname,filter:f},onSuccess:_=>{_.files.length||t.emitter.emit("vf-toast-push",{label:o("No search result found.")})}}):t.emitter.emit("vf-fetch",{params:{q:"index",adapter:t.fs.adapter,path:t.fs.data.dirname}})});const a=e.computed(()=>({active:t.sortActive,column:t.sortColumn,order:t.sortOrder})),d=(f=!0)=>{let _=[...t.fs.data.files.filter(h=>!h.isFile)],p=[...t.fs.data.files.filter(h=>h.isFile)],g=a.value.column,w=a.value.order==="asc"?1:-1;if(!f)return[..._,...p];const M=(h,k)=>typeof h=="string"&&typeof k=="string"?h.toLowerCase().localeCompare(k.toLowerCase()):h<k?-1:h>k?1:0;return a.value.active&&(_=_.slice().sort((h,k)=>M(h[g],k[g])*w),p=p.slice().sort((h,k)=>M(h[g],k[g])*w)),[..._,...p]},m=f=>{t.sortActive&&a.value.column===f?(t.sortActive=a.value.order==="asc",t.sortColumn=f,t.sortOrder="desc"):(t.sortActive=!0,t.sortColumn=f,t.sortOrder="asc")},u=f=>{let _=f.basename;return f.artist&&(_+=` (${f.artist}`,f.title&&(_+=` - ${f.title}`),_+=")"),_},v=tl((f,_)=>{const p=t.fs.data.cache[f.path];Object.assign(f,_),typeof p>"u"&&(t.fs.data.cache[f.path]=f)},1e3);return e.onMounted(()=>{c=new Ar(l.area.value)}),e.onUpdated(()=>{c.update()}),e.onBeforeUnmount(()=>{c.destroy()}),(f,_)=>(e.openBlock(),e.createElementBlock("div",Du,[e.unref(t).view==="list"||i.value.length?(e.openBlock(),e.createElementBlock("div",Tu,[e.createElementVNode("div",{onClick:_[0]||(_[0]=p=>m("basename")),class:"vuefinder__explorer__sort-button vuefinder__explorer__sort-button--name vf-sort-button"},[e.createTextVNode(e.toDisplayString(e.unref(o)("Name"))+" ",1),e.withDirectives(e.createVNode(bt,{direction:a.value.order},null,8,["direction"]),[[e.vShow,a.value.active&&a.value.column==="basename"]])]),i.value.length?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",{key:0,onClick:_[1]||(_[1]=p=>m("file_size")),class:"vuefinder__explorer__sort-button vuefinder__explorer__sort-button--size vf-sort-button"},[e.createTextVNode(e.toDisplayString(e.unref(o)("Size"))+" ",1),e.withDirectives(e.createVNode(bt,{direction:a.value.order},null,8,["direction"]),[[e.vShow,a.value.active&&a.value.column==="file_size"]])])),i.value.length?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",{key:1,onClick:_[2]||(_[2]=p=>m("last_modified")),class:"vuefinder__explorer__sort-button vuefinder__explorer__sort-button--date vf-sort-button"},[e.createTextVNode(e.toDisplayString(e.unref(o)("Date"))+" ",1),e.withDirectives(e.createVNode(bt,{direction:a.value.order},null,8,["direction"]),[[e.vShow,a.value.active&&a.value.column==="last_modified"]])])),i.value.length?(e.openBlock(),e.createElementBlock("div",{key:2,onClick:_[3]||(_[3]=p=>m("path")),class:"vuefinder__explorer__sort-button vuefinder__explorer__sort-button--path vf-sort-button"},[e.createTextVNode(e.toDisplayString(e.unref(o)("Filepath"))+" ",1),e.withDirectives(e.createVNode(bt,{direction:a.value.order},null,8,["direction"]),[[e.vShow,a.value.active&&a.value.column==="path"]])])):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0),e.createElementVNode("div",Mu,[e.createVNode(Rd,{ref_key:"dragImage",ref:r,count:e.unref(l).getCount()},null,8,["count"])]),e.createElementVNode("div",{ref:e.unref(l).scrollBarContainer,class:e.normalizeClass(["vf-explorer-scrollbar-container vuefinder__explorer__scrollbar-container",[{"grid-view":e.unref(t).view==="grid"},{"search-active":i.value.length}]])},[e.createElementVNode("div",{ref:e.unref(l).scrollBar,class:"vuefinder__explorer__scrollbar"},null,512)],2),e.createElementVNode("div",{ref:e.unref(l).area,class:"vuefinder__explorer__selector-area vf-explorer-scrollbar vf-selector-area min-h-32",onContextmenu:_[4]||(_[4]=e.withModifiers(p=>e.unref(t).emitter.emit("vf-contextmenu-show",{event:p,items:e.unref(l).getSelected()}),["self","prevent"]))},[e.unref(t).loadingIndicator==="linear"&&e.unref(t).fs.loading?(e.openBlock(),e.createElementBlock("div",Au)):e.createCommentVNode("",!0),i.value.length?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:1},e.renderList(d(),(p,g)=>(e.openBlock(),e.createBlock(en,{item:p,index:g,dragImage:r.value,class:"vf-item vf-item-list","onUpdate:item":w=>e.unref(v)(p,w)},{default:e.withCtx(()=>[e.createElementVNode("div",Ou,[e.createElementVNode("div",Lu,[e.createVNode(Qt,{type:p.type,small:e.unref(t).compactListView},null,8,["type","small"]),e.createElementVNode("span",Fu,e.toDisplayString(p.basename),1)]),e.createElementVNode("div",Ru,e.toDisplayString(p.path),1)])]),_:2},1032,["item","index","dragImage","onUpdate:item"]))),256)):e.createCommentVNode("",!0),e.unref(t).view==="list"&&!i.value.length?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:2},e.renderList(d(),(p,g)=>(e.openBlock(),e.createBlock(en,{item:p,index:g,dragImage:r.value,class:"vf-item vf-item-list",draggable:"true",key:p.path,"onUpdate:item":w=>e.unref(v)(p,w)},{default:e.withCtx(()=>[e.createElementVNode("div",Hu,[e.createElementVNode("div",Iu,[e.createVNode(Qt,{type:p.type,small:e.unref(t).compactListView},null,8,["type","small"]),e.createElementVNode("span",{class:"vuefinder__explorer__item-name",title:u(p)},[e.createTextVNode(e.toDisplayString(p.basename)+" ",1),((p.mime_type||p.mimeType)??"").startsWith("audio")&&p.artist?(e.openBlock(),e.createElementBlock("span",Uu,[e.createTextVNode(" ("+e.toDisplayString(p.artist)+" ",1),p.title?(e.openBlock(),e.createElementBlock("span",ju," - "+e.toDisplayString(p.title),1)):e.createCommentVNode("",!0),_[5]||(_[5]=e.createTextVNode(") "))])):e.createCommentVNode("",!0)],8,zu)]),e.createElementVNode("div",qu,[e.createTextVNode(e.toDisplayString(p.file_size?e.unref(t).filesize(p.file_size):"")+" ",1),((p.mime_type||p.mimeType)??"").startsWith("audio")?(e.openBlock(),e.createElementBlock("span",Pu," ("+e.toDisplayString(e.unref(wd)(p.duration*1e3))+") ",1)):e.createCommentVNode("",!0)]),e.createElementVNode("div",Gu,e.toDisplayString(e.unref(vr)(p.last_modified)),1)])]),_:2},1032,["item","index","dragImage","onUpdate:item"]))),128)):e.createCommentVNode("",!0),e.unref(t).view==="grid"&&!i.value.length?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:3},e.renderList(d(!1),(p,g)=>(e.openBlock(),e.createBlock(en,{item:p,index:g,dragImage:r.value,class:"vf-item vf-item-grid",draggable:"true","onUpdate:item":w=>e.unref(v)(p,w)},{default:e.withCtx(()=>[e.createElementVNode("div",null,[e.createElementVNode("div",Wu,[((p.mime_type||p.mimeType)??"").startsWith("image")&&e.unref(t).showThumbnails?(e.openBlock(),e.createElementBlock("img",{src:"data:image/png;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",class:"vuefinder__explorer__item-thumbnail lazy","data-src":e.unref(t).requester.getPreviewUrl(e.unref(t).fs.adapter,p),alt:p.basename,key:p.path},null,8,Ku)):(e.openBlock(),e.createBlock(Qt,{key:1,type:p.type},null,8,["type"])),!(((p.mime_type||p.mimeType)??"").startsWith("image")&&e.unref(t).showThumbnails)&&p.type!=="dir"?(e.openBlock(),e.createElementBlock("div",Yu,e.toDisplayString(s(p.extension)),1)):e.createCommentVNode("",!0)]),e.createElementVNode("span",Ju,e.toDisplayString(e.unref(hn)(p.basename)),1)])]),_:2},1032,["item","index","dragImage","onUpdate:item"]))),256)):e.createCommentVNode("",!0)],544),e.createVNode(yd)]))}},Zu=["href","download"],Qu=["onClick"],em={__name:"ContextMenu",setup(n){const t=e.inject("ServiceContainer"),{t:o}=t.i18n,s=e.ref(null),r=e.ref([]),i=e.ref(""),l=e.reactive({active:!1,items:[],positions:{left:0,top:0}}),c=e.computed(()=>l.items.filter(u=>u.key==null||t.features.includes(u.key)));t.emitter.on("vf-context-selected",u=>{r.value=u});const a={newfolder:{key:Z.NEW_FOLDER,title:()=>o("New Folder"),action:()=>t.modal.open(ar)},selectAll:{title:()=>o("Select All"),action:()=>t.dragSelect.selectAll()},pinFolder:{title:()=>o("Pin Folder"),action:()=>{t.pinnedFolders=t.pinnedFolders.concat(r.value),t.storage.setStore("pinned-folders",t.pinnedFolders)}},unpinFolder:{title:()=>o("Unpin Folder"),action:()=>{t.pinnedFolders=t.pinnedFolders.filter(u=>!r.value.find(v=>v.path===u.path)),t.storage.setStore("pinned-folders",t.pinnedFolders)}},delete:{key:Z.DELETE,title:()=>o("Delete"),action:()=>{t.modal.open(Mn,{items:r})}},refresh:{title:()=>o("Refresh"),action:()=>{t.emitter.emit("vf-fetch",{params:{q:"index",adapter:t.fs.adapter,path:t.fs.data.dirname}})}},preview:{key:Z.PREVIEW,title:()=>o("Preview"),action:()=>t.modal.open(pr,{adapter:t.fs.adapter,item:r.value[0]})},open:{title:()=>o("Open"),action:()=>{t.emitter.emit("vf-search-exit"),t.emitter.emit("vf-fetch",{params:{q:"index",adapter:t.fs.adapter,path:r.value[0].path}})}},openDir:{title:()=>o("Open containing folder"),action:()=>{t.emitter.emit("vf-search-exit"),t.emitter.emit("vf-fetch",{params:{q:"index",adapter:t.fs.adapter,path:r.value[0].dir}})}},download:{key:Z.DOWNLOAD,link:e.computed(()=>t.requester.getDownloadUrl(t.fs.adapter,r.value[0])),title:()=>o("Download"),action:()=>{}},archive:{key:Z.ARCHIVE,title:()=>o("Archive"),action:()=>t.modal.open(fr,{items:r})},unarchive:{key:Z.UNARCHIVE,title:()=>o("Unarchive"),action:()=>t.modal.open(ur,{items:r})},rename:{key:Z.RENAME,title:()=>o("Rename"),action:()=>t.modal.open(An,{items:r})}},d=u=>{t.emitter.emit("vf-contextmenu-hide"),u.action()};t.emitter.on("vf-search-query",({newQuery:u})=>{i.value=u}),t.emitter.on("vf-contextmenu-show",({event:u,items:v,target:f=null})=>{if(l.items=[],i.value)if(f)l.items.push(a.openDir),t.emitter.emit("vf-context-selected",[f]);else return;else!f&&!i.value?(l.items.push(a.refresh),l.items.push(a.selectAll),l.items.push(a.newfolder),t.emitter.emit("vf-context-selected",[])):v.length>1&&v.some(_=>_.path===f.path)?(l.items.push(a.refresh),l.items.push(a.archive),l.items.push(a.delete),t.emitter.emit("vf-context-selected",v)):(f.type==="dir"?(l.items.push(a.open),t.pinnedFolders.findIndex(_=>_.path===f.path)!==-1?l.items.push(a.unpinFolder):l.items.push(a.pinFolder)):(l.items.push(a.preview),l.items.push(a.download)),l.items.push(a.rename),(f.mime_type||f.mimeType)==="application/zip"?l.items.push(a.unarchive):l.items.push(a.archive),l.items.push(a.delete),t.emitter.emit("vf-context-selected",[f]));m(u)}),t.emitter.on("vf-contextmenu-hide",()=>{l.active=!1});const m=u=>{const v=t.dragSelect.area.value,f=t.root.getBoundingClientRect(),_=v.getBoundingClientRect();let p=u.clientX-f.left,g=u.clientY-f.top;l.active=!0,e.nextTick(()=>{var k;const w=(k=s.value)==null?void 0:k.getBoundingClientRect();let M=(w==null?void 0:w.height)??0,h=(w==null?void 0:w.width)??0;p=_.right-u.pageX+window.scrollX<h?p-h:p,g=_.bottom-u.pageY+window.scrollY<M?g-M:g,l.positions={left:p+"px",top:g+"px"}})};return(u,v)=>e.withDirectives((e.openBlock(),e.createElementBlock("ul",{ref_key:"contextmenu",ref:s,style:e.normalizeStyle(l.positions),class:"vuefinder__context-menu"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(c.value,f=>(e.openBlock(),e.createElementBlock("li",{class:"vuefinder__context-menu__item",key:f.title},[f.link?(e.openBlock(),e.createElementBlock("a",{key:0,class:"vuefinder__context-menu__link",target:"_blank",href:f.link,download:f.link,onClick:v[0]||(v[0]=_=>e.unref(t).emitter.emit("vf-contextmenu-hide"))},[e.createElementVNode("span",null,e.toDisplayString(f.title()),1)],8,Zu)):(e.openBlock(),e.createElementBlock("div",{key:1,class:"vuefinder__context-menu__action",onClick:_=>d(f)},[e.createElementVNode("span",null,e.toDisplayString(f.title()),1)],8,Qu))]))),128))],4)),[[e.vShow,l.active]])}},tm={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",class:"h-5 w-5",viewBox:"0 0 24 24"};function nm(n,t){return e.openBlock(),e.createElementBlock("svg",tm,t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"},null,-1)]))}const hr={render:nm},om={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-width":"2",class:"h-5 w-5 stroke-slate-500 cursor-pointer",viewBox:"0 0 24 24"};function rm(n,t){return e.openBlock(),e.createElementBlock("svg",om,t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0"},null,-1)]))}const sm={render:rm},lm={class:"vuefinder__status-bar__wrapper"},am={class:"vuefinder__status-bar__storage"},im=["title"],cm={class:"vuefinder__status-bar__storage-icon"},dm=["value"],um={class:"vuefinder__status-bar__info"},mm={key:0},fm={class:"vuefinder__status-bar__selected-count"},vm={class:"vuefinder__status-bar__actions"},pm=["disabled","onClick"],_m=["disabled"],hm=["title"],gm={__name:"Statusbar",setup(n){const t=e.inject("ServiceContainer"),{t:o}=t.i18n,{setStore:s}=t.storage,r=t.dragSelect,i=()=>{t.emitter.emit("vf-search-exit"),t.emitter.emit("vf-fetch",{params:{q:"index",adapter:t.fs.adapter}}),s("adapter",t.fs.adapter)},l=e.ref("");t.emitter.on("vf-search-query",({newQuery:d})=>{l.value=d});const c=d=>{const m=t.selectButton.multiple?r.getSelected().length>0:r.getSelected().length===1;return d.isActive()&&m},a=e.computed(()=>{const d=t.selectButton.multiple?r.getSelected().length>0:r.getSelected().length===1;return t.selectButton.active&&d});return(d,m)=>(e.openBlock(),e.createElementBlock("div",lm,[e.createElementVNode("div",am,[e.createElementVNode("div",{class:"vuefinder__status-bar__storage-container",title:e.unref(o)("Storage")},[e.createElementVNode("div",cm,[e.createVNode(e.unref(hr))]),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":m[0]||(m[0]=u=>e.unref(t).fs.adapter=u),onChange:i,class:"vuefinder__status-bar__storage-select",tabindex:"-1"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(t).fs.data.storages,u=>(e.openBlock(),e.createElementBlock("option",{value:u},e.toDisplayString(u),9,dm))),256))],544),[[e.vModelSelect,e.unref(t).fs.adapter]])],8,im),e.createElementVNode("div",um,[l.value.length?(e.openBlock(),e.createElementBlock("span",mm,e.toDisplayString(e.unref(t).fs.data.files.length)+" items found. ",1)):e.createCommentVNode("",!0),e.createElementVNode("span",fm,e.toDisplayString(e.unref(t).dragSelect.getCount()>0?e.unref(o)("%s item(s) selected.",e.unref(t).dragSelect.getCount()):""),1)])]),e.createElementVNode("div",vm,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(t).additionalButtons,u=>(e.openBlock(),e.createElementBlock("button",{class:e.normalizeClass(["vf-btn py-0 vf-btn-primary",{disabled:!c(u)}]),disabled:!c(u),onClick:v=>u.click(e.unref(r).getSelected(),v)},e.toDisplayString(u.label),11,pm))),256)),e.unref(t).selectButton.active?(e.openBlock(),e.createElementBlock("button",{key:0,class:e.normalizeClass(["vf-btn py-0 vf-btn-primary",{disabled:!a.value}]),disabled:!a.value,onClick:m[1]||(m[1]=u=>e.unref(t).selectButton.click(e.unref(r).getSelected(),u))},e.toDisplayString(e.unref(o)("Select")),11,_m)):e.createCommentVNode("",!0),e.createElementVNode("span",{class:"vuefinder__status-bar__about",title:e.unref(o)("About"),onClick:m[2]||(m[2]=u=>e.unref(t).modal.open(or))},[e.createVNode(e.unref(sm))],8,hm)])]))}},km={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-width":"1.5",class:"text-neutral-500 fill-sky-500 stroke-gray-100/50 dark:stroke-slate-700/50 dark:fill-slate-500",viewBox:"0 0 24 24"};function wm(n,t){return e.openBlock(),e.createElementBlock("svg",km,t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 9.776q.168-.026.344-.026h15.812q.176 0 .344.026m-16.5 0a2.25 2.25 0 0 0-1.883 2.542l.857 6a2.25 2.25 0 0 0 2.227 1.932H19.05a2.25 2.25 0 0 0 2.227-1.932l.857-6a2.25 2.25 0 0 0-1.883-2.542m-16.5 0V6A2.25 2.25 0 0 1 6 3.75h3.879a1.5 1.5 0 0 1 1.06.44l2.122 2.12a1.5 1.5 0 0 0 1.06.44H18A2.25 2.25 0 0 1 20.25 9v.776"},null,-1)]))}const gr={render:wm},bm={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"h-5 w-5",viewBox:"0 0 24 24"};function ym(n,t){return e.openBlock(),e.createElementBlock("svg",bm,t[0]||(t[0]=[e.createElementVNode("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),e.createElementVNode("path",{d:"M12 2c5.523 0 10 4.477 10 10s-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2m3.6 5.2a1 1 0 0 0-1.4.2L12 10.333 9.8 7.4a1 1 0 1 0-1.6 1.2l2.55 3.4-2.55 3.4a1 1 0 1 0 1.6 1.2l2.2-2.933 2.2 2.933a1 1 0 0 0 1.6-1.2L13.25 12l2.55-3.4a1 1 0 0 0-.2-1.4"},null,-1)]))}const Em={render:ym},Vm={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"};function Sm(n,t){return e.openBlock(),e.createElementBlock("svg",Vm,t[0]||(t[0]=[e.createElementVNode("path",{stroke:"none",d:"M0 0h24v24H0z"},null,-1),e.createElementVNode("path",{d:"M15 12H9M12 9v6"},null,-1)]))}const kr={render:Sm},Nm={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"};function xm(n,t){return e.openBlock(),e.createElementBlock("svg",Nm,t[0]||(t[0]=[e.createElementVNode("path",{stroke:"none",d:"M0 0h24v24H0z"},null,-1),e.createElementVNode("path",{d:"M9 12h6"},null,-1)]))}const wr={render:xm};function br(n,t){const o=n.findIndex(s=>s.path===t.path);o>-1?n[o]=t:n.push(t)}const Bm={class:"vuefinder__folder-loader-indicator"},Cm={key:1,class:"vuefinder__folder-loader-indicator--icon"},yr={__name:"FolderLoaderIndicator",props:e.mergeModels({adapter:{type:String,required:!0},path:{type:String,required:!0}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(n){const t=n,o=e.inject("ServiceContainer");o.i18n;const s=e.useModel(n,"modelValue"),r=e.ref(!1);e.watch(()=>s.value,()=>{var c;return((c=i())==null?void 0:c.folders.length)||l()});function i(){return o.treeViewData.find(c=>c.path===t.path)}const l=()=>{r.value=!0,o.requester.send({url:"",method:"get",params:{q:"subfolders",adapter:t.adapter,path:t.path}}).then(c=>{br(o.treeViewData,{path:t.path,...c})}).catch(c=>{}).finally(()=>{r.value=!1})};return(c,a)=>{var d;return e.openBlock(),e.createElementBlock("div",Bm,[r.value?(e.openBlock(),e.createBlock(e.unref(On),{key:0,class:"vuefinder__folder-loader-indicator--loading"})):(e.openBlock(),e.createElementBlock("div",Cm,[s.value&&((d=i())!=null&&d.folders.length)?(e.openBlock(),e.createBlock(e.unref(wr),{key:0,class:"vuefinder__folder-loader-indicator--minus"})):e.createCommentVNode("",!0),s.value?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(e.unref(kr),{key:1,class:"vuefinder__folder-loader-indicator--plus"}))]))])}}},$m={class:"vuefinder__treesubfolderlist__item-content"},Dm=["onClick"],Tm=["title","onClick"],Mm={class:"vuefinder__treesubfolderlist__item-icon"},Am={class:"vuefinder__treesubfolderlist__subfolder"},Om={__name:"TreeSubfolderList",props:{adapter:{type:String,required:!0},path:{type:String,required:!0}},setup(n){const t=e.inject("ServiceContainer"),o=e.ref([]),s=n,r=e.ref(null);e.onMounted(()=>{s.path===s.adapter+"://"&&xe(r.value,{scrollbars:{theme:"vf-theme-dark dark:vf-theme-light"}})});const i=e.computed(()=>{var l;return((l=t.treeViewData.find(c=>c.path===s.path))==null?void 0:l.folders)||[]});return(l,c)=>{const a=e.resolveComponent("TreeSubfolderList",!0);return e.openBlock(),e.createElementBlock("ul",{ref_key:"parentSubfolderList",ref:r,class:"vuefinder__treesubfolderlist__container"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(i.value,(d,m)=>(e.openBlock(),e.createElementBlock("li",{key:d.path,class:"vuefinder__treesubfolderlist__item"},[e.createElementVNode("div",$m,[e.createElementVNode("div",{class:"vuefinder__treesubfolderlist__item-toggle",onClick:u=>o.value[d.path]=!o.value[d.path]},[e.createVNode(yr,{adapter:n.adapter,path:d.path,modelValue:o.value[d.path],"onUpdate:modelValue":u=>o.value[d.path]=u},null,8,["adapter","path","modelValue","onUpdate:modelValue"])],8,Dm),e.createElementVNode("div",{class:"vuefinder__treesubfolderlist__item-link",title:d.path,onClick:u=>e.unref(t).emitter.emit("vf-fetch",{params:{q:"index",adapter:s.adapter,path:d.path}})},[e.createElementVNode("div",Mm,[e.unref(t).fs.path===d.path?(e.openBlock(),e.createBlock(e.unref(gr),{key:0})):(e.openBlock(),e.createBlock(e.unref(jt),{key:1}))]),e.createElementVNode("div",{class:e.normalizeClass(["vuefinder__treesubfolderlist__item-text",{"vuefinder__treesubfolderlist__item-text--active":e.unref(t).fs.path===d.path}])},e.toDisplayString(d.basename),3)],8,Tm)]),e.createElementVNode("div",Am,[e.withDirectives(e.createVNode(a,{adapter:s.adapter,path:d.path},null,8,["adapter","path"]),[[e.vShow,o.value[d.path]]])])]))),128))],512)}}},Lm={__name:"TreeStorageItem",props:{storage:{type:String,required:!0}},setup(n){const t=e.inject("ServiceContainer"),{setStore:o}=t.storage,s=e.ref(!1);function r(i){i===t.fs.adapter?s.value=!s.value:(t.emitter.emit("vf-search-exit"),t.emitter.emit("vf-fetch",{params:{q:"index",adapter:i}}),o("adapter",i))}return(i,l)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("div",{onClick:l[2]||(l[2]=c=>r(n.storage)),class:"vuefinder__treestorageitem__header"},[e.createElementVNode("div",{class:e.normalizeClass(["vuefinder__treestorageitem__info",n.storage===e.unref(t).fs.adapter?"vuefinder__treestorageitem__info--active":""])},[e.createElementVNode("div",{class:e.normalizeClass(["vuefinder__treestorageitem__icon",n.storage===e.unref(t).fs.adapter?"vuefinder__treestorageitem__icon--active":""])},[e.createVNode(e.unref(hr))],2),e.createElementVNode("div",null,e.toDisplayString(n.storage),1)],2),e.createElementVNode("div",{class:"vuefinder__treestorageitem__loader",onClick:l[1]||(l[1]=e.withModifiers(c=>s.value=!s.value,["stop"]))},[e.createVNode(yr,{adapter:n.storage,path:n.storage+"://",modelValue:s.value,"onUpdate:modelValue":l[0]||(l[0]=c=>s.value=c)},null,8,["adapter","path","modelValue"])])]),e.withDirectives(e.createVNode(Om,{adapter:n.storage,path:n.storage+"://",class:"vuefinder__treestorageitem__subfolder"},null,8,["adapter","path"]),[[e.vShow,s.value]])],64))}},Fm={class:"vuefinder__folder-indicator"},Rm={class:"vuefinder__folder-indicator--icon"},Hm={__name:"FolderIndicator",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(n){const t=e.useModel(n,"modelValue");return(o,s)=>(e.openBlock(),e.createElementBlock("div",Fm,[e.createElementVNode("div",Rm,[t.value?(e.openBlock(),e.createBlock(e.unref(wr),{key:0,class:"vuefinder__folder-indicator--minus"})):e.createCommentVNode("",!0),t.value?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(e.unref(kr),{key:1,class:"vuefinder__folder-indicator--plus"}))])]))}},Im={class:"vuefinder__treeview__header"},zm={class:"vuefinder__treeview__pinned-label"},Um={class:"vuefinder__treeview__pin-text text-nowrap"},jm={key:0,class:"vuefinder__treeview__pinned-list"},qm={class:"vuefinder__treeview__pinned-item"},Pm=["onClick"],Gm=["title"],Wm=["onClick"],Km={key:0},Ym={class:"vuefinder__treeview__no-pinned"},Jm={class:"vuefinder__treeview__storage"},Xm={__name:"TreeView",setup(n){const t=e.inject("ServiceContainer"),{t:o}=t.i18n,{getStore:s,setStore:r}=t.storage,i=e.ref(190),l=e.ref(s("pinned-folders-opened",!0));e.watch(l,m=>r("pinned-folders-opened",m));const c=m=>{t.pinnedFolders=t.pinnedFolders.filter(u=>u.path!==m.path),t.storage.setStore("pinned-folders",t.pinnedFolders)},a=m=>{const u=m.clientX,v=m.target.parentElement,f=v.getBoundingClientRect().width;v.classList.remove("transition-[width]"),v.classList.add("transition-none");const _=g=>{i.value=f+g.clientX-u,i.value<50&&(i.value=0,t.showTreeView=!1),i.value>50&&(t.showTreeView=!0)},p=()=>{const g=v.getBoundingClientRect();i.value=g.width,v.classList.add("transition-[width]"),v.classList.remove("transition-none"),window.removeEventListener("mousemove",_),window.removeEventListener("mouseup",p)};window.addEventListener("mousemove",_),window.addEventListener("mouseup",p)},d=e.ref(null);return e.onMounted(()=>{xe(d.value,{overflow:{x:"hidden"},scrollbars:{theme:"vf-theme-dark dark:vf-theme-light"}})}),e.watch(t.fs.data,(m,u)=>{const v=m.files.filter(f=>f.type==="dir");br(t.treeViewData,{path:t.fs.path,folders:v.map(f=>({adapter:f.storage,path:f.path,basename:f.basename}))})}),(m,u)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("div",{onClick:u[0]||(u[0]=v=>e.unref(t).showTreeView=!e.unref(t).showTreeView),class:e.normalizeClass(["vuefinder__treeview__overlay",e.unref(t).showTreeView?"vuefinder__treeview__backdrop":"hidden"])},null,2),e.createElementVNode("div",{style:e.normalizeStyle(e.unref(t).showTreeView?"min-width:100px;max-width:75%; width: "+i.value+"px":"width: 0"),class:"vuefinder__treeview__container"},[e.createElementVNode("div",{ref_key:"treeViewScrollElement",ref:d,class:"vuefinder__treeview__scroll"},[e.createElementVNode("div",Im,[e.createElementVNode("div",{onClick:u[2]||(u[2]=v=>l.value=!l.value),class:"vuefinder__treeview__pinned-toggle"},[e.createElementVNode("div",zm,[e.createVNode(e.unref(_r),{class:"vuefinder__treeview__pin-icon"}),e.createElementVNode("div",Um,e.toDisplayString(e.unref(o)("Pinned Folders")),1)]),e.createVNode(Hm,{modelValue:l.value,"onUpdate:modelValue":u[1]||(u[1]=v=>l.value=v)},null,8,["modelValue"])]),l.value?(e.openBlock(),e.createElementBlock("ul",jm,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(t).pinnedFolders,v=>(e.openBlock(),e.createElementBlock("li",qm,[e.createElementVNode("div",{class:"vuefinder__treeview__pinned-folder",onClick:f=>e.unref(t).emitter.emit("vf-fetch",{params:{q:"index",adapter:v.storage,path:v.path}})},[e.unref(t).fs.path!==v.path?(e.openBlock(),e.createBlock(e.unref(jt),{key:0,class:"vuefinder__treeview__folder-icon"})):e.createCommentVNode("",!0),e.unref(t).fs.path===v.path?(e.openBlock(),e.createBlock(e.unref(gr),{key:1,class:"vuefinder__treeview__open-folder-icon"})):e.createCommentVNode("",!0),e.createElementVNode("div",{title:v.path,class:e.normalizeClass(["vuefinder__treeview__folder-name text-nowrap",{"vuefinder__treeview__folder-name--active":e.unref(t).fs.path===v.path}])},e.toDisplayString(v.basename),11,Gm)],8,Pm),e.createElementVNode("div",{class:"vuefinder__treeview__remove-favorite",onClick:f=>c(v)},[e.createVNode(e.unref(Em),{class:"vuefinder__treeview__remove-icon"})],8,Wm)]))),256)),e.unref(t).pinnedFolders.length?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("li",Km,[e.createElementVNode("div",Ym,e.toDisplayString(e.unref(o)("No folders pinned")),1)]))])):e.createCommentVNode("",!0)]),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(t).fs.data.storages,v=>(e.openBlock(),e.createElementBlock("div",Jm,[e.createVNode(Lm,{storage:v},null,8,["storage"])]))),256))],512),e.createElementVNode("div",{onMousedown:a,class:e.normalizeClass([(e.unref(t).showTreeView,""),"vuefinder__treeview__resize-handle"])},null,34)],4)],64))}},Zm={class:"vuefinder__main__content"},Qm={__name:"VueFinder",props:e.mergeModels({id:{type:String,default:"vf"},request:{type:[String,Object],required:!0},persist:{type:Boolean,default:!1},path:{type:String,default:""},features:{type:[Array,Boolean],default:!0},debug:{type:Boolean,default:!1},theme:{type:String,default:"system"},locale:{type:String,default:null},maxHeight:{type:String,default:"600px"},maxFileSize:{type:String,default:"10mb"},fullScreen:{type:Boolean,default:!1},showTreeView:{type:Boolean,default:!1},pinnedFolders:{type:Array,default:[]},showThumbnails:{type:Boolean,default:!0},selectButton:{type:Object,default(n){return{active:!1,multiple:!1,click:t=>{},...n}}},onError:{type:Function,default:null},loadingIndicator:{type:String,default:"circular"},additionalButtons:{type:Array,default(){return[]}}},{view:{default:"grid"},viewModifiers:{},sort:{},sortModifiers:{}}),emits:e.mergeModels(["select","update:path"],["update:view","update:sort"]),setup(n,{emit:t}){const o=t,s=n,r=e.useModel(n,"view"),i=e.useModel(n,"sort"),l=il(s,{view:r,sort:i},e.inject("VueFinderOptions"));e.provide("ServiceContainer",l);const{setStore:c}=l.storage,a=e.ref(null);l.root=a;const d=l.dragSelect;Ia(l);const m=f=>{l.fs.updateData(f),d.clearSelection(),d.refreshSelection()};let u;l.emitter.on("vf-fetch-abort",()=>{u.abort(),l.fs.loading=!1}),l.emitter.on("vf-fetch",({params:f,body:_=null,onSuccess:p=null,onError:g=null,noCloseModal:w=!1})=>{["index","search"].includes(f.q)&&(u&&u.abort(),l.fs.loading=!0),u=new AbortController;const M=u.signal;l.requester.send({url:"",method:f.m||"get",params:f,body:_,abortSignal:M}).then(h=>{l.fs.adapter=h.adapter,l.persist&&(l.fs.path=h.dirname,c("path",l.fs.path)),w||l.modal.close(),m(h),p&&p(h)}).catch(h=>{console.error(h),g&&g(h)}).finally(()=>{["index","search"].includes(f.q)&&(l.fs.loading=!1)})});function v(f){let _={};f&&f.includes("://")&&(_={adapter:f.split("://")[0],path:f}),l.emitter.emit("vf-fetch",{params:{q:"index",adapter:l.fs.adapter,..._},onError:s.onError??(p=>{p.message&&l.emitter.emit("vf-toast-push",{label:p.message,type:"error"})})})}return e.onMounted(()=>{v(l.fs.path),e.watch(()=>s.path,f=>{v(f)}),d.onSelect((f,_)=>{o("select",f,_)}),e.watch(()=>l.fs.data.dirname,f=>{o("update:path",f)})}),(f,_)=>(e.openBlock(),e.createElementBlock("div",{class:"vuefinder",ref_key:"root",ref:a,tabindex:"0"},[e.createElementVNode("div",{class:e.normalizeClass(e.unref(l).theme.actualValue)},[e.createElementVNode("div",{class:e.normalizeClass([e.unref(l).fullScreen?"vuefinder__main__fixed":"vuefinder__main__relative","vuefinder__main__container"]),style:e.normalizeStyle(e.unref(l).fullScreen?"":"max-height: "+n.maxHeight),onMousedown:_[0]||(_[0]=p=>e.unref(l).emitter.emit("vf-contextmenu-hide")),onTouchstartPassive:_[1]||(_[1]=p=>e.unref(l).emitter.emit("vf-contextmenu-hide"))},[e.createVNode(uc),e.createVNode(vd),e.createElementVNode("div",Zm,[e.createVNode(Xm),e.createVNode(Xu)]),e.createVNode(gm)],38),e.createVNode(e.Transition,{name:"fade"},{default:e.withCtx(()=>[e.unref(l).modal.visible?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(e.unref(l).modal.type),{key:0})):e.createCommentVNode("",!0)]),_:1}),e.createVNode(em)],2)],512))}},ef={install(n,t={}){t.i18n=t.i18n??{};let[o]=Object.keys(t.i18n);t.locale=t.locale??o??"en",n.provide("VueFinderOptions",t),n.component("VueFinder",Qm)}};module.exports=ef;
